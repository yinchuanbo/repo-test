const toolPicingUrl="/pricing.html";var userRuleConfig={limit:100,countrycode:"T3",times:1,credit:0,is_subscriber:2};function setCookie(e,t,i){var o=new Date;o.setDate(o.getDate()+i);var n=location.hostname.includes(".miocreate.com")?".miocreate.com":location.hostname,s=encodeURIComponent(t)+(null==i?"":";expires="+o.toUTCString())+";path=/;domain="+n;document.cookie=e+"="+s}function getCookie(e){const t=document.cookie.split(";");for(const i of t){const[t,o]=i.trim().split("=");if(t===e)return decodeURIComponent(o)}return null}function isMobileDevice(){const e=navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}function randomchoice(e){let t=null;return function(){let i=e.filter((e=>e!==t)),o=i[Math.floor(Math.random()*i.length)];return t=o,o}}function setNewTag(e){const t=$(".new_tag");if(!t)return;const i=getCookie("newTime1")||0,o=(new Date).getTime();(!i||o<=Number(i)+6048e5)&&t.show(),i||e||(setCookie("newTime1",(new Date).getTime()),t.show())}function setFsNewTag(e){const t=$(".fs_new_tag");if(!t)return;const i=getCookie("newfsTime")||0,o=(new Date).getTime();(!i||o<=Number(i)+6048e5)&&t.show(),i||e||(setCookie("newfsTime",(new Date).getTime()),t.show())}function getCreditsSystemText(e,t={},i=!1){i&&t.val>1&&(e+="_p");let o=jsonData?.faceSwap?.faceSwapPop01[e];for(let e in t){const i=new RegExp(`{{${e}}}`,"g");o=o.replace(i,t[e])}return o}window.userRuleConfig=userRuleConfig;const multicreditSystem=new CreditsSystem({bannerId:"multi_photo",appendedDom:$("#multiple_Face_swapper_container .swap_credit_banner"),creditsText:lan.faceSwapPop02,appendedPopDom:$("#multiple_Face_swapper_container")});multicreditSystem.setBannerHtml(),multicreditSystem.setCreditsPopup();const multiVcreditSystem=new CreditsSystem({bannerId:"multi_video",appendedDom:$("#multiple_Face_swapper_container_v .swap_credit_banner"),creditsText:lan.faceSwapPop02,appendedPopDom:$("#multiple_Face_swapper_container_v")});multiVcreditSystem.setBannerHtml(),multiVcreditSystem.setCreditsPopup();const photocreditSystem=new CreditsSystem({bannerId:"photo",appendedDom:$("#photo_Face_swapper_container .swap_credit_banner"),creditsText:lan.faceSwapPop02,appendedPopDom:$("#photo_Face_swapper_container")});photocreditSystem.setBannerHtml(),photocreditSystem.setCreditsPopup();const videocreditSystem=new CreditsSystem({bannerId:"video",appendedDom:$("#video_Face_swapper_container .swap_credit_banner"),creditsText:lan.faceSwapPop02,appendedPopDom:$("#video_Face_swapper_container")});function showHdCredits({clickfn:e,type:t}){({photo:photocreditSystem,multi:multicreditSystem,video:videocreditSystem,multiv:multiVcreditSystem})[t].showCreditPopup({title:getCreditsSystemText("hqpoptitle"),content:getCreditsSystemText("pop1080p"),btn:getCreditsSystemText("unlocknow"),btnFn:()=>{e?.()},modalCoins:"hd"})}function swap_isSameDay(){let e=Date.now(),t=getCookie("faceSwapTime_swap");if(!t)return!1;const i=new Date(e),o=new Date(Number(t)),n=i.getFullYear(),s=i.getMonth(),a=i.getDate(),c=o.getFullYear(),r=o.getMonth(),d=o.getDate();return n===c&&s===r&&a===d}function getUserHdCookie(){try{const e=JSON.parse(getCookie("userHd")||"{}"),t=JSON.parse(getCookie("user_info")||"{}"),i=e[t.id]||{};if(1!==window.userRuleConfig.is_subscriber)return e[t.id]={},void setCookie("userHd",JSON.stringify(e));const o={multi:"",video:"_video",photo:"_photo",multiv:"_multiv"},n={multi:multicreditSystem,video:videocreditSystem,photo:photocreditSystem,multiv:multiVcreditSystem};Object.keys(i).forEach((function(e){1===i[e]?($(`.high_quality_append_dom${o[e]} .customSwitch`).attr("checked","checked"),n[e].is_hd=1):($(`.high_quality_append_dom${o[e]} .customSwitch`).removeAttr("checked"),n[e].is_hd=2)}))}catch(e){console.error(e)}}async function getVideoCoverImage(e){return e.setAttribute("crossOrigin","anonymous"),new Promise(((t,i)=>{e.play(),setTimeout((()=>{e.pause()}),100),setTimeout((()=>{try{let i=document.createElement("canvas");i.width=e.videoWidth,i.height=e.videoHeight,i.getContext("2d").drawImage(e,0,0,i.width,i.height);let o=i.toDataURL("image/jpeg");t(o)}catch(e){console.log("获取第一帧失败"),t("")}}),500)}))}function getCreditsFromVideoOrPic(e,t="image"){const i=e.uploadFacesNumber;let o=1;if("video"===t)if(i<=3){let t=e.duration/(window.userRuleConfig.duration||10);o=5*Math.ceil(t)}else{let t=e.duration/(window.userRuleConfig.duration||10);o=2*Math.ceil(t)*i}else i>6&&(o=2);return o}function changeHeaderCredit(e){const t=$("header-credit")?.[0],i=$("#go_credits");t&&t.updateInfo(),i&&i.find(".credits_num span").text(e)}function isMacorIos(){var e=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(e);return!((!/iPad|iPhone|iPod/.test(e)||window.MSStream)&&!t)}function initCreditsComponents(){multiVcreditSystem.setHighQualityHtml($(".high_quality_append_dom_multiv"),1!==userRuleConfig?.is_subscriber,(()=>{gtag("event","alert_faceswap_hd_v"),showHdCredits({clickfn:()=>{gtag("event","click_faceswap_hd_v")},type:"multiv"})}),"multiv"),multicreditSystem.setHighQualityHtml($(".high_quality_append_dom"),1!==window.userRuleConfig?.is_subscriber,(()=>{gtag("event","alert_faceswap_hd_m"),showHdCredits({clickfn:()=>{gtag("event","click_faceswap_hd_m")},type:"multi"})}),"multi"),photocreditSystem.setHighQualityHtml($(".high_quality_append_dom_photo"),1!==userRuleConfig?.is_subscriber,(()=>{gtag("event","alert_faceswap_hd"),showHdCredits({clickfn:()=>{gtag("event","click_faceswap_hd")},type:"photo"})}),"photo"),videocreditSystem.setHighQualityHtml($(".high_quality_append_dom_video"),1!==userRuleConfig?.is_subscriber,(()=>{gtag("event","alert_faceswap_hd_v"),showHdCredits({clickfn:()=>{gtag("event","click_faceswap_hd_v")},type:"video"})}),"video"),multiVcreditSystem.showCreditBanner({bool:!0,showcallback:()=>{gtag("event","show_mulfaceswap_videobanner"),$("#multiple_Face_swapper_container_v .swap_credit_btn_video, #multiple_Face_swapper_container_v .swap_credit_btn_photo").off("click").on("click",(function(){getCookie("access_token")?setSessionCookie("st","mulloggedcreditbannermv",30):setSessionCookie("st","mulnotcreditbannermv",30)}))}}),multicreditSystem.showCreditBanner({bool:!0,showcallback:()=>{gtag("event","show_mulfaceswap_imgbanner"),$("#multiple_Face_swapper_container .swap_credit_btn_video, #multiple_Face_swapper_container .swap_credit_btn_photo").off("click").on("click",(function(){getCookie("access_token")?setSessionCookie("st","mulloggedcreditbanner",30):setSessionCookie("st","mulnotcreditbanner",30)}))}}),videocreditSystem.showCreditBanner({bool:!0,showcallback:()=>{gtag("event","show_faceswap_videobanner")}}),photocreditSystem.showCreditBanner({bool:!0,showcallback:()=>{gtag("event","show_faceswap_imgbanner")}}),getUserHdCookie(),$(".signout").click((()=>{setTimeout((()=>{location.reload()}),50)})),photocreditSystem.appendedDom.find(".swap_credit_btn").click((function(){gtag("event","click_faceswap_imgbanner"),setCookie("st","fsimgcreditbanner")})),videocreditSystem.appendedDom.find(".swap_credit_btn").click((function(){gtag("event","click_faceswap_videobanner"),setCookie("st","fsvideocreditbanner")})),multicreditSystem.appendedDom.find(".swap_credit_btn").click((function(){gtag("event","click_mulfaceswap_imgbanner"),setCookie("st","mulfsimgcreditbanner")})),multiVcreditSystem.appendedDom.find(".swap_credit_btn").click((function(){gtag("event","click_mulfaceswap_videobanner"),setCookie("st","mulfsvideocreditbanner")}))}videocreditSystem.setBannerHtml(),videocreditSystem.setCreditsPopup();