const TOOL_API=location.host.includes("vidqu.ai")&&!location.host.includes("test")?"https://tool-api.vidqu.ai/":"https://tool-api-test.vidqu.ai/",interHost=location.host.includes("vidqu.ai")&&!location.host.includes("test")?"https://main-api.vidqu.ai/":"https://main-api-test.vidqu.ai/",homeUrl=location.host.includes("vidqu.ai")&&!location.host.includes("test")?"https://www.vidqu.ai/":"https://test2-931c96916996ea8e.vidqu.ai/ai-image-generator-home.html";function judgeClient(){let e="";return e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"pc",e}function isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function ttsBlank(e){return null==e||"null"===e||""===e||void 0===e||"undefined"===e||"unknown"===e}const addScripTag=e=>{const t=document.createElement("script");t.src=e,t.type="module";(document.head||document.getElementsByTagName("head")[0]).appendChild(t)},addcssTag=e=>{const t=document.createElement("link");t.rel="stylesheet",t.href=e;(document.head||document.getElementsByTagName("head")[0]).appendChild(t)};function Modal(e){const{iconType:t="",titleText:o="",isCancel:i="false",submitType:n="",content:a="",contentList:s="[]",isClose:r="true",submitText:l=""}=e;$("body").append(`\n      <confirm-dialog\n        titleText="${o}"\n        contentList='${s}'\n        iconType="${t}"\n        isClose=${r}\n        isCancel="${i}"\n        submitType="${n}"\n        content="${a}"\n        submitText="${l}">\n      </confirm-dialog>`)}function initLoginDialog(e=""){const t="/dist/js";addScripTag(t+"/commonSignin/login-dialog.js"),addScripTag(t+"/confirm-dialog/index.js");const o=document.createElement("link");o.rel="stylesheet",o.href=t+"/commonSignin/IGlogin.css";(document.head||document.getElementsByTagName("head")[0]).appendChild(o);document.querySelector("body").innerHTML+="<my-component></my-component>"}initLoginDialog();const localPathKey="LOCAL_PATH_STORAGE",localPathJSON=localStorage.getItem(localPathKey),localPath=localPathJSON?JSON.parse(localPathJSON):[];function showLoginWindow(e={}){const{fn:t=()=>{},isReloading:o=!1,closeFn:i=()=>{}}=e;document.body.style.overflow="hidden",$("my-component").off("loginsuccess").on("loginsuccess",(async()=>{t(),isLogin(!0),console.log("login successful")})).off("closeLoginDialog").on("closeLoginDialog",(()=>{i(),console.log("login closed"),document.body.style.overflow="auto"})),o?localStorage.setItem("toolsPosition",o):localStorage.setItem("toolsPosition","false"),$("my-component").length&&$("my-component")[0].showLoginDialog()}function goApp(){window.location.href="/app"}function goFaceSwap(){window.location.href="/face-swap.html"}function setCookieSesid(e){let t=e.headers.get("Sesid"),o=e.headers.get("Sesid-sign"),i=getCookie("SsToken"),n=getCookie("SsToken-sign");t=ttsBlank(t)?i:t,o=ttsBlank(t)?n:o,setCookie("SsToken",t),setCookie("SsToken-sign",o)}function fetchPost(e,t={},o={},i=!0){return new Promise(((n,a)=>{fetch(TOOL_API+e,{method:"POST",headers:{"Content-Type":"application/json","X-TASK-VERSION":"2.0.0","Request-Origin":"vidqu",Sesid:ttsBlank(getCookie("SsToken"))?"":getCookie("SsToken"),"Sesid-sign":ttsBlank(getCookie("SsToken-sign"))?"":getCookie("SsToken-sign"),Authorization:ttsBlank(getCookie("access_token"))?"":"Bearer "+getCookie("access_token"),...o},body:JSON.stringify(t)}).then((e=>{setCookieSesid(e),e.json().then((async e=>{401===e.code?(localStorage.removeItem("user_info"),setCookie("loginProduct",""),setSessionCookie("st",""),setCookie("refresh_token",""),setCookie("user_info",""),setCookie("access_token",""),isLogin(!1),i&&showLoginWindow(),await aiGirlFriend.initCharacters(),aiGirlFriend.GetRecentChatting(),aiGirlFriend.GetMyCharacters(),n(e)):n(e)}))})).catch((e=>{$Popup({type:"error",errorType:"network"}),a(e)}))}))}localStorage.setItem(localPathKey,JSON.stringify([...new Set([...localPath,location.pathname])]));var fetchPut=function(e,t,o={}){return new Promise(((i,n)=>{fetch(e,{method:"PUT",headers:{"X-TASK-VERSION":"2.0.0",...o},body:t}).then((e=>i(e.status))).catch((e=>n(e)))}))},fetchGet=function(e,t={},o=!0){return new Promise(((i,n)=>{fetch(TOOL_API+e,{method:"GET",headers:{"Content-Type":"application/json","X-TASK-VERSION":"2.0.0","Request-Origin":"vidqu",Sesid:ttsBlank(getCookie("SsToken"))?"":getCookie("SsToken"),"Sesid-sign":ttsBlank(getCookie("SsToken-sign"))?"":getCookie("SsToken-sign"),Authorization:ttsBlank(getCookie("access_token"))?"":"Bearer "+getCookie("access_token"),...t}}).then((e=>{setCookieSesid(e),e.json().then((async e=>{401===e.code?(aiChatting.closeChat(),localStorage.removeItem("user_info"),setCookie("loginProduct",""),setSessionCookie("st",""),setCookie("refresh_token",""),setCookie("user_info",""),setCookie("access_token",""),isLogin(!1),o&&showLoginWindow(),await aiGirlFriend.initCharacters(),aiGirlFriend.GetRecentChatting(),aiGirlFriend.GetMyCharacters(),n(e)):i(e)}))})).catch((e=>{$Popup({type:"error",errorType:"network"}),n(e)}))}))};function fetchPostNormal(e,t,o=TOOL_API,i={"Content-Type":"application/json"}){return new Promise(((n,a)=>{fetch(o+e,{method:"POST",headers:{"Request-Origin":"vidqu",Authorization:"Bearer "+getCookie("access_token")||"",...i},body:t instanceof FormData?t:JSON.stringify(t)}).then((e=>{e.json().then((async e=>{401===e.code?(localStorage.removeItem("user_info"),setCookie("loginProduct",""),setSessionCookie("st",""),setCookie("refresh_token",""),setCookie("user_info",""),setCookie("access_token",""),isLogin(!1),isShowLogin&&showLoginWindow(),await aiGirlFriend.initCharacters(),aiGirlFriend.GetRecentChatting(),aiGirlFriend.GetMyCharacters(),n(e)):n(e)}))})).catch((e=>{a(e)}))}))}function fetchGetNormal(e,t=TOOL_API,o={}){return new Promise(((i,n)=>{fetch(t+e,{method:"GET",headers:{"Content-Type":"application/json","Request-Origin":"vidqu",Authorization:"Bearer "+getCookie("access_token")||"",...o}}).then((e=>e.json().then((async e=>{401===e.code?(aiChatting.closeChat(),localStorage.removeItem("user_info"),setCookie("loginProduct",""),setSessionCookie("st",""),setCookie("refresh_token",""),setCookie("user_info",""),setCookie("access_token",""),isLogin(!1),isShowLogin&&showLoginWindow(),await aiGirlFriend.initCharacters(),aiGirlFriend.GetRecentChatting(),aiGirlFriend.GetMyCharacters(),n(e)):i(e)})))).catch((e=>n(e)))}))}function setCookie(e,t,o=30){var i=new Date;i.setDate(i.getDate()+o);var n=location.hostname.includes(".vidqu.ai")?".vidqu.ai":location.hostname,a=encodeURIComponent(t)+(null==o?"":";expires="+i.toUTCString())+";path=/;domain="+n;document.cookie=e+"="+a}function getCookie(e){const t=document.cookie.split(";");for(const o of t){const[t,i]=o.trim().split("=");if(t===e)return decodeURIComponent(i)}return null}const isSeo=()=>{let e=!1,t=["google.","baidu.","yandex.","bing.","yahoo.","duckduckgo.",".naver.","go.mail.ru","qwant.","sougou.",".so.","rambler.",".ask.","daum.",".ecosia.",".startsiden.",".onetonline.","search.smt.docomo",".biglobe.","seznam."];for(let o of t)if(document.referrer.includes(o))return e=!0,e},getinsurValue=()=>{let e="",t=document.location.pathname;return t.includes("/explore")?e="en_vidq_imginfo":"/ai-image-generator.html"==t?e="en_vidq_imgenerator":"/"==t&&(e="en_vidq_home"),isSeo()&&(e=e.replace("en","enseo")),e};function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);return null!=o?encodeURI(o[2]):null}const setInsurCookie=()=>{getCookie("insur")||isSeo()||getUrlParam("insur")||getCookie("insurLevel")||setCookie("insur",getinsurValue(),30),isSeo()&&(getCookie("insur")&&(getCookie("insur").includes("seo")||getUrlParam("insur")||getCookie("insurLevel"))||setCookie("insur",getinsurValue(),30)),getUrlParam("insur")&&(getCookie("insurLevel")||(setCookie("insur",getUrlParam("insur"),30),setCookie("insurLevel","strong",30),getCookie("aff")&&JSON.parse(getCookie("aff"))&&JSON.parse(getCookie("aff")).a_aid&&getCookie("insur")&&getCookie("insur").includes("googlecamp")&&(document.cookie="aff=; expires=Thu, 01 Jan 1971 00:00:00 UTC; path=/;domain=.vidqu.ai"))),null!==getUrlParam("a_aid")&&(cookieObj={a_aid:getUrlParam("a_aid"),chan:getUrlParam("chan"),data1:getUrlParam("data1"),data2:getUrlParam("data2")},getCookie("insur")&&getCookie("insur").includes("googlecamp")&&(document.cookie="insur=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=.vidqu.ai",document.cookie="insurLevel=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=.vidqu.ai"),setCookie("aff",JSON.stringify(cookieObj),120))};function getPreferredLanguage(){let e="";e=$("html").attr("lang").substring(0,2);var t=["en","de","es","fr","it","pt","ja","ar","kr","tw"].filter((function(t){return t===e}));return t.length>0?"ja"==t[0]?"jp":t[0]:"en"}const transtoBlob=({b64data:e,contentType:t="image/png"})=>{t=t||"";let o=1024,i=atob(e.split(",")[1]),n=i.length,a=Math.ceil(n/o),s=new Array(a);for(let e=0;e<a;++e){let t=e*o,a=Math.min(t+o,n),r=new Array(a-t);for(let e=t,o=0;e<a;++o,++e)r[o]=i[e].charCodeAt(0);s[e]=new Uint8Array(r)}return new Blob(s,{type:t})};function setSessionCookie(e,t){var o=location.hostname.includes(".vidqu.ai")?".vidqu.ai":location.hostname,i=escape(t)+";path=/;domain="+o;document.cookie=e+"="+i}function handleScrollAnimation(){$(".scroll-animation").each((function(e,t){t.getBoundingClientRect().top<.66*window.innerHeight&&$(t).addClass("on")}))}function igLogin(){(getCookie("access_token")?getCookie("access_token"):"")?isLogin(!0):isLogin(!1)}window.addEventListener("scroll",(function(){handleScrollAnimation()}));var defaultHeadImg="/dist/img/IGhome/icon_avatar.svg";const profileDialog=new initProFile;function resizeImageByFile(e){return new Promise(((t,o)=>{var i=new FileReader;i.onloadend=()=>{let e=new Image;e.onload=()=>{let o=document.createElement("canvas"),i=o.getContext("2d"),n=Math.max(e.width,e.height);if(n>3072){let t=3072/n;o.width=e.width*t,o.height=e.height*t}else o.width=e.width,o.height=e.height;i.drawImage(e,0,0,o.width,o.height);var a=o.toDataURL(),s=transtoBlob({b64data:a,contentType:"image/png"});let r="width";o.width<o.height&&(r="height"),t({blog:s,imgType:r})},e.onerror=()=>{t({blog:null})},e.src=i.result},i.onerror=o,i.readAsDataURL(e)}))}$("body").on("mouseup",(function(e){const t=$(e.target),o=0!=t.parents("#header_inform").length||t.hasClass("inform");if(o?("pc"==judgeClient()?$("#header_inform .inform_box").show():($("header .inform_mobile_list").slideDown(),document.body.style.overflow="hidden"),$("#header_inform").addClass("active")):$("#header_inform").hasClass("active")&&"pc"==judgeClient()?($("#header_inform,.inform_item").removeClass("unlook"),$("#header_inform .inform_box").hide(),$("#header_inform").removeClass("active"),aiGirlFriend.clearIfication()):(o||t.hasClass("inform_m_back")&&$("#header_inform").hasClass("active"))&&($("header .inform_mobile_list").slideUp(),document.body.style.overflow="auto",$("#header_inform").removeClass("active"),aiGirlFriend.clearIfication()),t.hasClass("likeIcon")){likePost(t.closest(".IGgrid_table_item").attr("data-id"),t)}if(t.hasClass("mask_remix")){window.location.pathname.includes("/explore/")?gtag("event","click_imginfo_card"):gtag("event","click_home_card");const e=t.closest(".IGgrid_table_item").attr("data-id");window.location.href=`/explore/${e}`}if(t.hasClass("remix_btn")){e.stopPropagation(),window.location.pathname.includes("/explore/")?gtag("event","click_imginfo_cardtryitbtn"):gtag("event","click_home_cardtryitbtn");const o=t.closest(".IGgrid_table_item").attr("data-id");window.location.href=`/ai-image-generator.html?setInfoId=${o}`}if(t.hasClass("header_editUser")||t.hasClass("userName")){profileDialog.clearUserData();let e=$Popup({type:"editUser",title:jsonData.IGpopup.editUser.title,content:$(".editUserInfo").html(),closeBtn:jsonData.IGpopup.editUser.save,applyBtn:jsonData.IGpopup.editUser.cancel,autoClose:!1,exist:"editUser",onClose:()=>{let t=!0;profileDialog.editUser_Avatar?$(".erorrTip[data-type='editUserAvatar']").css("visibility","hidden"):($(".erorrTip[data-type='editUserAvatar']").find(".image_error").text(jsonData.aiGirlFriend.createMc.avatar_not),$(".erorrTip[data-type='editUserAvatar']").css("visibility","visible"),t=!1),profileDialog.editUser_firstName?$(".erorrTip[data-type='editUser_firstName']").css("visibility","hidden"):($(".erorrTip[data-type='editUser_firstName']").css("visibility","visible"),t=!1),profileDialog.editUser_lastName?$(".erorrTip[data-type='editUser_lastName']").css("visibility","hidden"):($(".erorrTip[data-type='editUser_lastName']").css("visibility","visible"),t=!1),t&&(e.loading.start(),$(".modal .createMc_item").addClass("loading"),profileDialog.userInfoUpdate((()=>{$(".modal .createMc_item").removeClass("loading"),e.loading.end(),e.close(),profileDialog.clearUserData(),updateUserData()}),(()=>{e.loading.end()})))},onApply:async()=>{e.close(),profileDialog.clearUserData()}});profileDialog.getUserData(),profileDialog.clickUserEvent()}if(0!=t.parents(".addImage").length||t.hasClass("addImage")){let e=0!=t.parents(".addImage").length?t.parents(".addImage"):t;0!=e.parents(".avatar").length?0!=e.parents(".editUser").length?$("#editUserAvatar").click():$("#createMC_avatar").click():0!=e.parents(".background").length&&$("#createMC_background").click()}if("pc"!==judgeClient()&&(e.stopPropagation(),0!==t.closest(".IGgrid_table_item").length&&!t.hasClass("likeIcon"))){const e=t.closest(".IGgrid_table_item").attr("data-id");window.location.href=`/explore/${e}`}})),$(".inform_list_box").on("scroll",(function(e){$(".inform_list_box").scrollTop()>=$(".inform_list").height()-$(".inform_list_box").height()&&aiGirlFriend.GetIfications(!1)}));const currentDate=new Date,timezoneOffset=currentDate.getTimezoneOffset(),browserLanguage=navigator.language||navigator.userLanguage,getWhiteList=()=>{fetchPost(`api/site/mio-config?t=${(new Date).getTime()}`,{}).then((e=>{200===e.code?e.data.is_in_ip_whitelist||-480!==timezoneOffset||"zh-cn"!==browserLanguage.toLowerCase()||(document.body.innerHTML='<div class="shield-page">The website is not available</div>',document.head.innerHTML="\n          <style>\n               *{\n                   padding:0;\n                   margin:0;\n                 }\n               body{\n                 background-image: linear-gradient(to right, rgb(241,238,255), rgb(254,254,255));\n                 display: flex;\n                 align-items: center;\n                 justify-content: center;\n                 width: 100vw;\n                 height: 100vh;\n                 overflow: hidden;\n               }\n               .shield-page{\n                 font: normal normal 600 30px/30px Poppins;\n                 color: #785EEE;\n               }\n               @media (max-width: 768px){\n                 .shield-page{\n                   font: normal normal 600 20px/20px Poppins;\n                 }\n               }\n          </style>"):console.log("err")}))};function randomchoice(e){let t=null;return function(){let o=e.filter((e=>e!==t)),i=o[Math.floor(Math.random()*o.length)];return t=i,i}}function updateUserData(){fetchPostNormal("api/user/get-profile",{},interHost).then((e=>{200==e.code&&(setUserInfo(e),aiGirlFriend.GetMyCharacters())})).catch((()=>{console.error("updateUserData error")}))}function setUserInfo(e){const{id:t}=JSON.parse(getCookie("user_info")),o={head_portrait:e.data.head_portrait,email:e.data.email,id:t,first_name:e.data.first_name,last_name:e.data.last_name,usertype:e.data.type};setCookie("user_info",JSON.stringify(o)),isLogin(!0)}function isBlob(e){return e instanceof Blob}function debounce(e,t){let o;return function(){let i=this,n=arguments;clearTimeout(o),o=setTimeout((function(){e.apply(i,n)}),t)}}function areObjectsEqual(e,t){const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return console.log("length unlike"),!1;for(const i of o){if(!t.hasOwnProperty(i))return console.log("key is not +",i),!1;if(e[i]!=t[i])return console.log("value is not +",i,e[i],t[i]),!1}return!0}function formatNumber(e){if(!e)return 0;if((e=Number(e))<1e3)return e.toString();if(e>=1e3&&e<1e6){const t=e/1e3;return t%1<.1?`${t.toFixed(0)}K`:`${t.toFixed(1)}K`}{const t=e/1e6;return t%1<.1?`${t.toFixed(0)}M`:`${t.toFixed(1)}M`}}function ToolTip(e){const{text:t="",type:o="",showtime:i=""}=e;$("body").append(`\n    <bottom-message\n      text="${t}"\n      type="${o}"\n      showtime="${i}"\n      >\n    </bottom-message>`)}function copyText(e){const t=e,o=document.createElement("input");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}getWhiteList(),$("#header_login").click((()=>{showLoginWindow({fn:igLogin})})),$(document).ready((function(){igLogin(),setInsurCookie()})),window.questLanguage=getPreferredLanguage(),window.userModel=judgeClient();let span=240;function renderGrid({list:e,isClear:t,callback:o}){let i=5;const n=$(".IGgrid_table_container");if("pc"!==judgeClient()){const e=Number(getComputedStyle(window.document.documentElement)["font-size"].split("px")[0]),t=n.width();span=(t-.22*e)/2,i=1}const a=$(".IGgrid_container"),s=$(".lottie-loading");if(!n||!a||!s)throw new Error("");let r=e.length;if(!r)return t&&n.html(""),void o?.();let l="";e.forEach((function(e,t){l+=`\n      <div class="IGgrid_table_item notshowitem" data-id="${e.id}">\n        <div class="img_box">\n          <img\n            src="${e.cover}"\n            style="width: 100%"\n            class="generated_img"\n            data-id="${e.id}"\n          />\n          <div class="mask_remix">\n            <p>\n              ${e.prompt}\n            </p>\n            <div class="remix_btn">${jsonData?.IGhome?.remix}</div>\n          </div>\n        </div>\n        <div class="userinfo">\n          <img\n            src="${e?.user?.avatar||"/dist/img/IGhome/icon_avatar.svg"}"\n            class="userHeadImg"\n          />\n          <p class="nickname">${e?.user?.username}</p>\n          <b class="likenum">${formatNumber(e?.stat?.like||0)}</b>\n          <div class="likeIcon ${e.liked?"like":""}" data-like="${e?.stat?.like}"></div>\n        </div>\n      </div>\n      `})),t&&n.html(""),n.append(l),$(".generated_img").off("load").on("load",(function(){r--;const e=span/$(this).width()*$(this).height()+61;$(`.IGgrid_table_item[data-id='${$(this).attr("data-id")}']`).css("grid-row-end",`span ${Number((e/i).toFixed(0))||1}`),r<=0&&(a.removeClass("notshow"),$(".IGgrid_table_item").removeClass("notshowitem"))})),$(".generated_img").off("error").on("error",(function(){"/dist/img/IGhome/default_failed_img.svg"!=$(this).attr("src")&&$(this).attr("src","/dist/img/IGhome/default_failed_img.svg")})),o?.()}function likePost(e,t){if(!getCookie("access_token"))return void showLoginWindow();const o=e=>{let o=Number(t.attr("data-like"));console.error(o),e?(!(o<=0)&&o--,t.removeClass("like")):(o++,t.addClass("like")),t.attr("data-like",o||0),t.siblings(".likenum").text(formatNumber(o||0))},i=t.hasClass("like");o(i),_$$.postComm("generate/post/like",{id:e}).then((e=>{200!=e.code&&(o(!i),401===e.code&&(localStorage.removeItem("user_info"),setCookie("loginProduct",""),setSessionCookie("st",""),setCookie("refresh_token",""),setCookie("user_info",""),setCookie("access_token",""),isLogin(!1),window.location.reload())),window.location.pathname.includes("/explore/")?gtag("event","click_imginfo_cardlikebtn"):gtag("event","click_home_cardlikebtn")})).catch((e=>{o(!i)}))}let isScrollLoading=!1,nomore=!1;function listenScroll({callback:e}){const t=$(".IGgrid_container"),o=(e,t)=>{let o=0,i=null;return function(...n){const a=Date.now();a-o>=t?(clearTimeout(i),e.apply(this,n),o=a):i||(i=setTimeout((()=>{e.apply(this,n),i=null}),t-(a-o)))}},i=function(){if(nomore)return!1;const o=window.pageYOffset||document.documentElement.scrollTop;if((window.innerHeight||document.documentElement.clientHeight)+o>=document.documentElement.scrollHeight-400){if(isScrollLoading)return;t.addClass("more_loading"),console.log("send message",nomore),isScrollLoading=!0,e?.()}};window.removeEventListener("scroll",o(i,500)),window.addEventListener("scroll",o(i,500))}function setGotoTop(e=null,t=".gotoHead"){e?$(t).on("click",(function(t){$("html, body").animate({scrollTop:$(e).offset().top-20},0)})):$(t).on("click",(function(e){window.scrollTo({top:0,behavior:"smooth"})}))}function setParams(e){let t,o="";for(t in e)e[t]&&String(e[t])&&(o+=`&${t}=${e[t]}`);return o&&(o="?"+o.slice(1)),o}async function renderShare(e,t){let o=`\n    <div class="share_mask">\n      <div class="share_box">\n        <div class="share_close_icon"></div>\n        <div class="share_title">\n          <div class="icon"></div>\n          <div class="text">${jsonData.IGshare.title}</div>\n        </div>\n        <div class="share_loading"></div>\n        <div class="share_content">\n          <div class="share_des">${jsonData.IGshare.des}</div>\n          <div class="share_method">\n            <div class="tw_method share">\n              <div class="icon tw"></div>\n              <div class="text tw">${jsonData.IGshare.x}</div>\n            </div>\n            <div class="fb_method share">\n              <div class="icon fb"></div>\n              <div class="text fb">${jsonData.IGshare.fb}</div>\n            </div>\n            <div class="link_method share">\n              <div class="icon link"></div>\n              <div class="text link">${jsonData.IGshare.link}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;const i=$(o),n=i.find(".share_box"),a=i.find(".share_close_icon"),s=i.find(".tw_method"),r=i.find(".fb_method"),l=i.find(".link_method");n.addClass("loading"),i.appendTo("body"),"info"===t?gtag("event","show_imginfo_share"):gtag("event","show_generator_share");let c=await async function(e){const t=setParams(e),o=`generate/image/share${t}`;try{const e=await _$$.getComm(o);if(console.log(e),200===e.code)return n.removeClass("loading"),e.data.url;i.remove(),ToolTip({type:"error",text:jsonData.IGshare.fail})}catch(e){console.log(e),i.remove(),ToolTip({type:"error",text:jsonData.IGshare.fail}),$Popup({type:"error",errorType:"network"})}}(e);c=c.trim(),a.on("click",(function(){i.remove()})),i.on("click",(function(e){$(e.target).closest(".share_box").length||i.remove()})),s.on("click",(function(){"info"===t?gtag("event","click_imginfo_xshare"):gtag("event","click_generator_xshare"),window.open(`https://twitter.com/intent/tweet?url=${c}?play_source=Twitter&text=${encodeURIComponent(jsonData.IGshare.shareText)}`,"_blank")})),r.on("click",(function(){"info"===t?gtag("event","click_imginfo_fbshare"):gtag("event","click_generator_fbshare"),window.open(`https://www.facebook.com/sharer.php?u=${c}?play_source=Facebook&text=${encodeURIComponent(jsonData.IGshare.shareText)}`,"_blank")})),l.on("click",(function(){"info"===t?gtag("event","click_imginfo_linkshare"):gtag("event","click_generator_linkshare");try{copyText(c),ToolTip({text:jsonData.IGshare.copySuc})}catch(e){ToolTip({type:"error",text:jsonData.IGshare.copyErr})}}))}function showLeadLogin(e,t){if(getCookie("access_token"))return"back"===e&&window.history.back(),t?.(),!0;const o={};switch(e){case"back":o.title=jsonData.IGpopup.leadLoginBackTitle,o.content=`<br/>${jsonData.IGpopup.leadLoginBackDes}<br/><br/><br/>`;break;case"download":o.title=jsonData.IGpopup.leadLogindownTitle,o.content=`<br/>${jsonData.IGpopup.leadLogindownDes}<br/><br/><br/>`}const i=$Popup({title:o.title,content:o.content,applyBtn:jsonData.IGpopup.NotNow,closeBtn:jsonData.header.login,onClose:()=>{showLoginWindow({fn:()=>{t?.()}})},onApply:()=>{i.close(),"back"===e&&window.history.back()}})}function getCreditsText(e,t={},o=!1){if(o){let o=t.val;if("string"==typeof o){let e=o.replace(/,/g,"");o=parseFloat(e)}(o>1||o<1&&o>0)&&(e+="_p")}let i=jsonData.IGheader[e];for(let e in t){const o=new RegExp(`{{${e}}}`,"g");i=i.replace(o,t[e])}return i}function getUserinfo(){return new Promise(((e,t)=>{_$$.postComm("api/user/info").then((t=>{200===t?.code&&t?.data?e(t.data):(console.error(t),e(t))})).catch((t=>{console.error(t),e()}))}))}function setHeaderCredits(e){getCookie("access_token")&&($("#header_credits").html(`<img src="/dist/img/IGhome/icon_credits.svg">${getCreditsText("credit",{val:e},!0)}`),$("#header_credits").show())}$("#header_credits").hide();