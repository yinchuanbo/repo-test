$(document).ready((function(){const e=$(".main_home"),t=$(".filter_header"),o=$(".filter_header horizontal-selector"),n=$(".IGgrid_container"),a=$(".main_home .filter"),l=$(".main_home .filter_menu_item"),s=$(".main_home .filter_down_menu"),c={page:1,pageSize:36,tag:null,sort:"new",offset:null};function i(e){e?n.addClass("notshow"):n.removeClass("notshow")}function r(e){e?n.addClass("more_loading"):n.removeClass("more_loading")}function d(e=!0){e?i(!0):r(!0);const t=setParams(c);nomore=!1,_$$.getComm(`generate/post/list${t}`).then((t=>{isScrollLoading=!1,n.removeClass("more_loading"),(0===t.data.list.length||t.data.list.length<c.pageSize)&&(nomore=!0),c.offset=t.data.offset,renderGrid({list:t.data.list,isClear:e,callback:()=>{e?i(!1):r(!1)}}),listenScroll({callback:()=>{c.page++,d(!1)}})})).catch((e=>{$Popup({type:"error",errorType:"network"})}))}_$$.getComm("generate/post/tag-list").then((e=>{o[0].render({list:e.data}),o.on("igSelectorItemclick",(function(e){gtag("event","change_home_cate"),c.tag=e.originalEvent.detail.key,"All"===e.originalEvent.detail.key&&(c.tag=null),c.offset=null,c.page=1,d()}))})),d(),setGotoTop("#explore_title"),gtag("event","open_home_page"),document.querySelector("my-component").addEventListener("loginsuccess",(()=>{console.error("login successful"),c.offset=null,c.page=1,d()})),$(".signoutBtn").on("click",(async function(){c.offset=null,c.page=1,d()})),$(window).on("scroll",(function(o){const n=$(o.target).scrollTop(),a=$("horizontal-selector .filter_btn_right");"pc"==judgeClient()?n>560?(t.css("background","#070c14"),a.addClass("blackbg")):(t.css("background",""),a.removeClass("blackbg")):n>e.offset().top+50?(t.css("background","#070c14"),a.addClass("blackbg")):(t.css("background",""),a.removeClass("blackbg"))})),$("body").on("mouseup",(function(e){e.stopPropagation(),null===e.target.closest(".filter_down_menu")&&s.removeClass("active")})),a.on("click",(function(e){const t=$(this).parent();t.hasClass("active")?t.removeClass("active"):t.addClass("active")})),l.each((function(){const e=$(this);e.on("click",(function(t){$("#filer_icon").attr("src",e.children("img").attr("src")),$("#filer_name").text(e.children("span").text()),$(".filter_down_menu").removeClass("active"),c.sort=e.attr("data-key"),gtag("event",`change_home_${c.sort}btn`),c.offset=null,c.page=1,d()}))})),document.addEventListener("scroll",(function(e){const t=2*window.innerHeight;(document.body.scrollTop||document.documentElement.scrollTop)>t?$(".gotoHead").show():$(".gotoHead").hide()}))})),$(".face-btn").on("click",(async function(e){await new Promise((e=>setTimeout(e,800))),window.location.href="/face-swap.html"}));