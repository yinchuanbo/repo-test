"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var interHost=location.host.includes(".vidqu.ai")&&!location.host.includes("test")?"https://main-api.vidqu.ai":"https://main-api-test.vidqu.ai",checkspwd={newpwd:!1,confirm:!1},_reset_key="";function _debounce(e){var t=null;return function(){var r=arguments,n=this;t&&clearTimeout(t),t=setTimeout((function(){e.apply(n,r)}),1e3)}}function fetchPost(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,o){fetch(interHost+e,{method:"POST",headers:_objectSpread(_objectSpread({},{"Content-Type":"application/json","X-TASK-VERSION":"2.0.0","Request-Origin":"vidqu"}),r),body:JSON.stringify(t)}).then((function(e){n(e.json())})).catch((function(e){return o(e)}))}))}function isBlank(e){return null==e||"null"===e||""===e||void 0===e||"undefined"===e||"unknown"===e}function getStorage(e){var t=localStorage.getItem(e);return t&&"null"!==t&&null!==t?"number"==typeof t||"textareaVal"===e||"token"===e?t:JSON.parse(t):null}function OpenOrClosePassword(e){var t=findAncestors(e.target,(function(e){return e.classList&&e.classList.contains("reveal-button")}));if(t){var r=t.parentNode.querySelector("input");t.classList.contains("active")?(t.classList.remove("active"),r.setAttribute("type","password")):(t.classList.add("active"),r.setAttribute("type","text"));var n=r.value;r.focus(),r.value="",r.value=n}}function checkPasswordEyes(){var e=document.querySelectorAll(".reveal-button"),t=this;e.forEach((function(e){return e.addEventListener("click",OpenOrClosePassword.bind(t))}))}function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(t);return null!=r?encodeURI(r[2]):null}function setCookie(e,t){var r=location.hostname.includes(".vidqu.ai")?".vidqu.ai":location.hostname,n=escape(t)+";path=/;domain="+r;document.cookie=e+"="+n}$(".form-tips").html(),$(".form-email").removeClass("dirty"),$(document).on("input propertychange",".form-password[name='confirm']",(function(e){e.target.classList.remove("dirty"),e.target.value.length>0&&checkspwd.newpwd?($(".form-tips").html(),containsVal($(".form-input[name='newpwd']").val(),$(".form-input[name='confirm']").val())?(removeCheckStyle(e),checkspwd.confirm=!0,$(".form-tips").removeClass("dirty"),$(".button-email").removeAttr("disabled")):(checkspwd.confirm=!1,addCheckStyle(e),$(".form-tips").addClass("dirty"),$(".button-email").attr("disabled","disabled"),$(".pwd-tips").html(jsonData.loginUser.pwd_tips.match))):(checkspwd.confirm=!1,removeCheckStyle(e),checkspwd.newpwd&&$(".form-tips").removeClass("dirty")),checkspwd.confirm&&checkspwd.newpwd?$(".button-email").removeAttr("disabled"):$(".button-email").attr("disabled","disabled")})),$(document).on("input propertychange",".form-password[name='newpwd']",(function(e){e.target.classList.remove("dirty"),e.target.value.length>0?(console.log(onCheckPassword(e.target.value)),onCheckPassword(e.target.value)?(removeCheckStyle(e),checkspwd.newpwd=!0,isBlank($(".form-input[name='confirm']").val())?$(".form-tips").removeClass("dirty"):($(".form-tips").addClass("dirty"),!isBlank($(".form-input[name='confirm']").val())&&containsVal($(".form-input[name='newpwd']").val(),$(".form-input[name='confirm']").val())?($(".form-input[name='confirm']").removeClass("dirty"),$(".form-tips").removeClass("dirty"),checkspwd.confirm=!0):($(".form-input[name='confirm']").addClass("dirty"),$(".form-tips").html(),checkspwd.confirm=!1,$(".pwd-tips").html(jsonData.loginUser.pwd_tips.match)))):(addCheckStyle(e),$(".form-tips").addClass("dirty"),$(".form-input[name='confirm']").removeClass("dirty"),checkspwd.newpwd=!1)):(checkspwd.newpwd=!1,removeCheckStyle(e),$(".form-tips").removeClass("dirty"),$(".form-input[name='confirm']").removeClass("dirty")),checkspwd.confirm&&checkspwd.newpwd?$(".button-email").removeAttr("disabled"):$(".button-email").attr("disabled","disabled")}));var resetPasswordSend=function(e){fetchPost("/api/user/do-reset-password",e).then((function(e){if(200===e.code){$(".button-email").removeAttr("disabled");var t={id:e.data.id,email:e.data.email,first_name:e.data.first_name,last_name:e.data.last_name,head_portrait:e.data.head_portrait,usertype:e.data.type},r=e.data.redirect_url;setCookie("access_token",e.data.access_token,30),setCookie("refresh_token",e.data.refresh_token,30),setCookie("user_info",JSON.stringify(t),30),setCookie("loginProduct",r,30),window.location.href=r,$(".form-tips").removeClass("dirty")}else console.log("fail"),409===e.code?($(".button-email").attr("disabled","disabled"),$(".form-tips").html(e.message).addClass("dirty")):($(".button-email").removeAttr("disabled"),$(".form-tips").html(e.message).addClass("dirty"))}))};$("body").keydown((function(e){var t=e||window.event;if(13==(t.keyCode||t.which||t.charCode))return $(".button-email").attr("disabled")||$(".button-email").click(),!1}));var removeCheckStyle=function(e){e.target.classList.remove("dirty")},addCheckStyle=function(e){e.target.classList.add("dirty")},setCheckEmail=function(e,t){var r;return(r="page"==t?e.value:e.target.value)||isBlank(r)?("page"==t?e.classList.remove("dirty"):e.target.classList.remove("dirty"),!0):("page"==t?e.classList.add("dirty"):e.target.classList.add("dirty"),!1)},max_length=function(e,t){return!!regexs.numericRegex.test(t)&&backVal(e).length<=parseInt(t,10)},min_length=function(e,t){return!!regexs.numericRegex.test(t)&&backVal(e).length>=parseInt(t,10)},containsVal=function(e,t){return backVal(e)==t};function backVal(e){return"string"==typeof e?e:e.value}var onCheckPassword=function(e){return $(".pwd-tips").html(jsonData.loginUser.pwd_tips.len),0!=e.trim().length&&null!=e&&!(e.trim().length<6||e.trim().length>20)};function findAncestors(e,t){for(;null!=e;){if(t.call(null,e))return e;e=e.parentNode}return null}window.addEventListener("load",(function(){var e=location.search,t="",r="";document.querySelector(".button-email").addEventListener("click",(function(e){_reset_key=getUrlParam("reset_key"),$(".button-email").attr("disabled","disabled"),checkspwd&&($(".form-input").removeClass("dirty"),resetPasswordSend({reset_key:_reset_key,new_password:$("#newpassword").val(),productName:"vidqu"}))})),isBlank(getUrlParam("page_name"))||(t=$("#back-to-signin").attr("href"),r=$("#signup-to-free").attr("href"),-1!=e.indexOf("?")?($("#back-to-signin").attr("href",t+"?page_name="+e),$("#signup-to-free").attr("href",r+"?page_name="+e)):($("#back-to-signin").attr("href",t+"&page_name="+e),$("#signup-to-free").attr("href",r+"&page_name="+e))),isBlank(getStorage("video_email"))||($("#signinemail").val(getStorage("video_email").email),$("#email-forgot-submit").removeAttr("disabled"),checks.email=!0),checkPasswordEyes()}));