"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof v?t:v,r=Object.create(o.prototype),l=new P(a||[]);return i(r,"_invoke",{value:$(e,n,l)}),r}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",m="executing",f="completed",g={};function v(){}function h(){}function w(){}var b={};s(b,r,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(M([])));x&&x!==n&&a.call(x,r)&&(b=x);var F=w.prototype=v.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,r,l){var c=_(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==_typeof(u)&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,l)}),(function(e){n("throw",e,r,l)})):t.resolve(u).then((function(e){s.value=e,r(s)}),(function(e){return n("throw",e,r,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return o=o?o.then(i,i):i()}})}function $(t,n,a){var i=p;return function(o,r){if(i===m)throw Error("Generator is already running");if(i===f){if("throw"===o)throw r;return{value:e,done:!0}}for(a.method=o,a.arg=r;;){var l=a.delegate;if(l){var c=T(l,a);if(c){if(c===g)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===p)throw i=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=m;var s=_(t,n,a);if("normal"===s.type){if(i=a.done?f:d,s.arg===g)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(i=f,a.method="throw",a.arg=s.arg)}}}function T(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),g;var o=_(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function V(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(V,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(t)+" is not iterable")}return h.prototype=w,i(F,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:h,configurable:!0}),h.displayName=s(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,s(e,c,"GeneratorFunction")),e.prototype=Object.create(F),e},t.awrap=function(e){return{__await:e}},k(C.prototype),s(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,a,i,o){void 0===o&&(o=Promise);var r=new C(u(e,n,a,i),o);return t.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},k(F),s(F,c,"Generator"),s(F,r,(function(){return this})),s(F,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return l.type="throw",l.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],l=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var c=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(c&&s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:M(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),g}},t}function asyncGeneratorStep(e,t,n,a,i,o,r){try{var l=e[o](r),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){asyncGeneratorStep(o,a,i,r,l,"next",e)}function l(e){asyncGeneratorStep(o,a,i,r,l,"throw",e)}r(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var canMultiFaceData={};function showMaximumFileSizeV(){var e,t,n;multiVcreditSystem.showCreditPopup({title:getfsCreditsText("Model_MaximumFile_title"),content:getfsCreditsText(1===(null===(e=userRuleConfig)||void 0===e?void 0:e.is_subscriber)?"Model_MaximumFile_span2":"Model_MaximumFile_span",{val:userRuleConfig.limit}),btn:getfsCreditsText(1===(null===(t=userRuleConfig)||void 0===t?void 0:t.is_subscriber)?"ok":"Model_Unlock_btn"),btnFn:function(){var e;null===(e=userRuleConfig)||void 0===e||e.is_subscriber},isnotNeedPay:1===(null===(n=userRuleConfig)||void 0===n?void 0:n.is_subscriber),modalCoins:"filemax"})}window.multiphotoAiFaceChanging={};var MultiVideoAiFace=function(){return _createClass((function e(t){var n=this;_classCallCheck(this,e),_defineProperty(this,"getUploadFileUrl",(function(e){var t=e;try{t=e.split("/")[1]||"png"}catch(e){t="png"}return fetchPost("ai/source/temp-upload-url",{file_name:"Vidnoz_AiFaceSwap_"+(new Date).getTime()+"."+t},TOOL_API)})),_defineProperty(this,"uploadFile",(function(e){var t=e.url,n=e.file;return new Promise(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(a,i){var o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetchPut(t,n,"");case 3:o=e.sent,a(o),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message),i(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())})),_defineProperty(this,"formatTime",(function(e){if(0==e)return"00:00";if(n.ttsBlank(e)||Number.isNaN(e))return"00:00";var t=parseInt(e/60);t=t<10?"0"+t:t;var a=parseInt(e%60);return a=a<10?"0"+a:a,"".concat(t,":").concat(a)})),_defineProperty(this,"getUploadVideoUrl",(function(e){var t=e;try{t=e.substring(e.lastIndexOf("."))||"mp4"}catch(e){t="mp4"}return fetchPost("ai/source/temp-upload-url",{file_name:"Video Face Swap"+t},TOOL_API)})),_defineProperty(this,"setLiLoading",(function(e){e?$("#multiple_Face_swapper_container_v .multi_pics li").attr("style","filter: blur(3px);pointer-events: none;"):$("#multiple_Face_swapper_container_v .multi_pics li").attr("style","")})),_defineProperty(this,"setBigImageStart",(function(e){e?($("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("style","filter: blur(5px) brightness(0.7)"),$("#multiple_Face_swapper_container_v .loading_multi_box").show()):($("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("style",""),$("#multiple_Face_swapper_container_v .loading_multi_box").hide())})),_defineProperty(this,"transtoBlob",(function(e){var t=e.b64data,n=e.contentType,a=void 0===n?"image/png":n;a=a||"";for(var i=1024,o=atob(t.split(",")[1]),r=o.length,l=Math.ceil(r/i),c=new Array(l),s=0;s<l;++s){for(var u=s*i,_=Math.min(u+i,r),p=new Array(_-u),d=u,m=0;d<_;++m,++d)p[m]=o[d].charCodeAt(0);c[s]=new Uint8Array(p)}return new Blob(c,{type:a})})),_defineProperty(this,"setFirstStart",(function(e){e?($("#multiple_Face_swapper_container_v .multi_upload_before").addClass("loading"),$("#multiple_Face_swapper_container_v .multi_upload_after").addClass("loading"),$("#multiple_Face_swapper_container_v .multi_Input").addClass("disabled"),$("#multiple_Face_swapper_container_v .multi_Input .multi_uploader_btn_con").removeClass("show_btn_con").hide(),$("#multiple_Face_swapper_container_v .multi_Input .multi_uploader_btn_loading").show(),$("#multiple_Face_swapper_container_v .multi_uploader_btn .multi_uploader_btn_con").hide(),$("#multiple_Face_swapper_container_v .multi_uploader_btn .multi_uploader_btn_loading").show(),$("#multiple_Face_swapper_container_v .people_recognized_list").addClass("inter_loading"),$("#multi_video_con").addClass("loading"),n.form.firstPicLoading=!0,n.setBigImageStart(!0)):($("#multiple_Face_swapper_container_v .multi_upload_before").removeClass("loading"),$("#multiple_Face_swapper_container_v .multi_upload_after").removeClass("loading"),$("#multiple_Face_swapper_container_v .multi_Input").removeClass("disabled"),$("#multiple_Face_swapper_container_v .multi_Input .multi_uploader_btn_con").show().addClass("show_btn_con"),$("#multiple_Face_swapper_container_v .multi_Input .multi_uploader_btn_loading").hide(),$("#multiple_Face_swapper_container_v .multi_uploader_btn .multi_uploader_btn_loading").hide(),$("#multiple_Face_swapper_container_v .multi_uploader_btn .multi_uploader_btn_con").show(),$("#multiple_Face_swapper_container_v .people_recognized_list").removeClass("inter_loading"),$("#multi_video_con").removeClass("loading"),n.form.firstPicLoading=!1,n.setBigImageStart(!1))})),_defineProperty(this,"checkMultiChangeFaceStatus",(function(){n.formdata.avatar_main_key.some((function(e){return e.main_part_key}))?($("#multiple_Face_swapper_container_v .change_multi_face_btn ._multi_step3_btn").text(multitextContentObj.step3_btn),$("#multiple_Face_swapper_container_v .multi-generating-animate").hide(),$("#multiple_Face_swapper_container_v .change_multi_face_btn").removeClass("disabled"),n.changeFaceLoading=!1):$("#multiple_Face_swapper_container_v .change_multi_face_btn").addClass("disabled")})),_defineProperty(this,"changeMultiFace",_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n,!n.changeFaceLoading){e.next=3;break}return e.abrupt("return");case 3:n.setLoadingStart(!0),n.setLoadingVideoText(1),n.showToolBtn(!1),i=_objectSpread(_objectSpread({},n.formdata),{},{avatar_main_key:n.formdata.avatar_main_key.filter((function(e){return e.main_part_key})),is_hd:null===(t=multiVcreditSystem)||void 0===t?void 0:t.is_hd,duration:a.duration}),a.duration||delete i.duration,fetchPost("ai/ai-tool/add-task",{param:i,action:"multiple_video_face_swap"},TOOL_API,{"X-TASK-VERSION":"2.0.0"}).then(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.code?(showBtnCreditsMultiVideo(!0),n.getFinalImg(t.data.task_id)):3008===t.code?(showNotEnoughCreditsMV(getCreditsFromVideoOrPic(multiAiFaceV,"video")),n.checkMultiChangeFaceStatus(),n.setFirstStart(!1),n.setLiLoading(!1)):3014===t.code?(showMaximumMV(),n.checkMultiChangeFaceStatus(),(n.mergeKey||"multi_img"!==$("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("data-key"))&&n.showToolBtn(!0,!0),n.setFirstStart(!1),n.setLiLoading(!1)):401===t.code?(n.multimodelV.errorMessage({conText:multitextContentObj.loginFirst,btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setLoadingStart(!1)):3001===t.code?("multi_img"!==$("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("data-key")&&n.showToolBtn(!0,!0),$("#multiple_Face_swapper_container .multi_stpe3_upload .v_step3_btn_credits").show(),n.showCreditBannerV(!1),showMaximumMV(),n.setLoadingStart(!1)):(console.error(t),n.multimodelV.errorMessage({conText:"\n              <h1>".concat(multitextContentObj.faceSwapPop01.errorUploadTitle,"</h1>\n              <p>").concat(multitextContentObj.faceSwapPop01.errorUpload,"</p>\n            "),btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setLoadingStart(!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),n.multimodelV.errorMessage({conText:"\n            <h1>".concat(multitextContentObj.faceSwapPop01.errorUploadTitle,"</h1>\n            <p>").concat(multitextContentObj.faceSwapPop01.errorUpload,"</p>\n          "),btnText:multitextContentObj.OK}),n.checkMultiChangeFaceStatus(),n.multimodelV.options.visible=!0,n.setLoadingStart(!1)}));case 9:case"end":return e.stop()}}),e)})))),_defineProperty(this,"checkFileType",(function(e,t){var a=e.type,i=e.name.split("."),o=i[i.length-1].toLowerCase();return!(!["image/jpeg","image/png","image/webp","application/octet-stream"].includes(a)||!["jpeg","png","webp","jpg"].includes(o))||(n.multimodelV.errorMessage({conText:"\n          <h1>".concat(textContentObj.processImageTitle,"</h1>\n          <p>").concat(textContentObj.limit,"</p>\n        "),btnText:textContentObj.ok}),n.multimodelV.options.visible=!0,n.setBigImageStart(!1),1===t&&n.setFirstStart(!1),2===t&&n.setSecondStart(!1),!1)})),_defineProperty(this,"checkVideoType",(function(e){if("string"==typeof e)return!0;var t=["video/mp4","video/quicktime","video/webm","video/x-m4v","image/gif","application/octet-stream"];isMacorIos()&&(t=t.filter((function(e){return!e.includes("webm")})));var a=e.type;if(!t.includes(a)){var i=isMacorIos()?multitextContentObj.faceSwapPop01.limitvios:multitextContentObj.faceSwapPop01.limitv;return n.multimodelV.errorMessage({conText:"\n          <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n          <p>").concat(i,"</p>\n        "),btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setBigImageStart(!1),n.setFirstStart(!1),$("#multiple_Face_swapper_container_v #multi_uploader")[0].value="",!1}return!0})),_defineProperty(this,"getFinalImg",(function(e){var t=n;n.showToolBtn(!1),n.setLoadingStart(!0),n.taskid=e,fetchPost("ai/tool/get-task",{id:e},TOOL_API).then((function(a){if(a.message.includes("nsfw")){var i,o=multitextContentObj.nsfw_photo;return null!==(i=t.canMultiFaceData.data)&&void 0!==i&&i.credit&&(o=multitextContentObj.faceSwapPop01.Credits_failed_nsfw),n.multimodelV.errorMessage({conText:"\n              <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n              <p>").concat(o,"</p>\n            "),btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setLoadingStart(!1),void t.setLoadingMaskTip(!1)}if(a.message.includes("celebrity")){var r,l=multitextContentObj.faceSwapPop01.Target_Photo;return null!==(r=t.canMultiFaceData.data)&&void 0!==r&&r.credit&&(l=multitextContentObj.faceSwapPop01.Credits_failed_celebrity),n.multimodelV.errorMessage({conText:"\n              <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n              <p>").concat(l,"</p>\n            "),btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setLoadingStart(!1),void t.setLoadingMaskTip(!1)}if(a.message.includes("faces=")&&a.message.includes("faces=0")){var c,s=multitextContentObj.NoFaceMulti;return null!==(c=t.canMultiFaceData.data)&&void 0!==c&&c.credit&&(s=multitextContentObj.faceSwapPop01.Credits_failed_NoFaceMulti),n.multimodelV.errorMessage({conText:"\n                <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n                <p>").concat(s,"</p>\n              "),btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setLoadingStart(!1),void t.setLoadingMaskTip(!1)}if(200!==a.code){var u,_=multitextContentObj.faceSwapPop01.processImage;null!==(u=n.canMultiFaceData.data)&&void 0!==u&&u.credit&&(_=multitextContentObj.faceSwapPop01.Credits_failed),n.multimodelV.errorMessage({conText:"\n              <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n              <p>").concat(_,"</p>\n            "),btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setLoadingStart(!1),t.setLoadingMaskTip(!1)}else{var p,d,m;if(1===(null===(p=a.data.wait)||void 0===p?void 0:p.show_wait)){0==show_ppriority&&(gtag("event","show_mulfaceswap_videopriority"),show_ppriority++);var f=a.data.wait,g=f.num,v=f.second;t.setLoadingMaskTip(!0,{show_wait:1,num:g,second:v})}else t.setLoadingMaskTip(!1);if(-1===a.data.status?n.setLoadingVideoText(2,a.data.progress):-2===a.data.status&&n.setLoadingVideoText(3,a.data.progress),n.tryCount=0,0===a.data.status)show_ppriority=0,n.mergeImgUrl=null===(d=a.data.additional_data)||void 0===d?void 0:d.merge_url,n.mergeKey=null===(m=a.data.additional_data)||void 0===m?void 0:m.merge_key,setCookie("faceSwapTime_swap",Date.now(),2),window.userRuleConfig.credit=a.data.credit,n.showCreditBannerV(!0),changeHeaderCredit(a.data.credit),gtag("event","succ_mulfaceswap_videoswapbtn"),setTimeout((function(){var e,t,i;n.setLoadingStart(!1),$("#multiple_Face_swapper_container_v .change_multi_face_btn").removeClass("disabled"),$("#large_multi_face_v_modal #large_multi_video").attr("src",null===(e=a.data.additional_data)||void 0===e?void 0:e.merge_url),n.showMultiVideo("video",null===(t=a.data.additional_data)||void 0===t?void 0:t.merge_url,null===(i=a.data.additional_data)||void 0===i?void 0:i.cover_url),$(".controls").attr("style","display: flex"),n.showToolBtn(!0),n.setLoadingVideoText(1)}),1e3);else setTimeout((function(){n.getFinalImg(e)}),2e3)}})).catch((function(t){if(console.error(t),n.tryCount>=3){var a,i=multitextContentObj.faceSwapPop01.processImage;null!==(a=n.canMultiFaceData.data)&&void 0!==a&&a.credit&&(i=multitextContentObj.faceSwapPop01.Credits_failed),n.multimodelV.errorMessage({conText:"\n                <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n                <p>").concat(i,"</p>\n              "),btnText:multitextContentObj.OK}),n.multimodelV.options.visible=!0,n.setLoadingStart(!1),n.setLoadingMaskTip(!1)}else console.log("retrying"),setTimeout((function(){n.getFinalImg(e),n.tryCount++}),5e3)}))})),_defineProperty(this,"faceCheck",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.blobUrl,a=void 0===n?"":n,e.abrupt("return",new Promise((function(e,t){var n=new Image;n.src=a,n.onload=_asyncToGenerator(_regeneratorRuntime().mark((function a(){var i,o;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,faceapi.detectAllFaces(n,new faceapi.SsdMobilenetv1Options);case 3:if(!(i=a.sent).length){a.next=8;break}e(i.length),a.next=12;break;case 8:return a.next=10,faceapi.detectAllFaces(n,new faceapi.TinyFaceDetectorOptions({inputSize:416}));case 10:o=a.sent,e(o.length);case 12:a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0),t(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,14]])}))),n.onerror=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(error),t(error);case 2:case"end":return e.stop()}}),e)})))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_defineProperty(this,"checkFacePicMulti",(function(e){return new Promise(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n,a){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{"string"!=typeof e&&URL.createObjectURL(e),n(1)}catch(e){a(e)}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),_defineProperty(this,"showModalAboutFaceNumber",(function(e,t){$("#multiple_Face_swapper_container_v .multi_uploader_multi")[0].value="";var a=multitextContentObj.NoFaceMulti;e&&e>1&&(a=multitextContentObj.faceSwapPop01.manyFace),n.multimodelV.errorMessage({conText:"\n        <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n        <p>").concat(a,"</p>\n      "),btnText:multitextContentObj.faceSwapPop01.replaceImg,btnClick:function(){"faces_recognized"===t?$("#multiple_Face_swapper_container_v #multi_uploader").click():$("#multiple_Face_swapper_container_v .multi_uploader_multi").click()}}),n.multimodelV.options.visible=!0})),this.multimodelV=t.multimodelV,this.setMaskUnlockPriority(),Object.setPrototypeOf(e.prototype,this.data()),this.form=new Proxy(this.proxyData,{set:function(e,t,n){return e[t]=n,e.originImage?($("#multiple_Face_swapper_container_v .multi_upload_before").hide(),$("#multiple_Face_swapper_container_v .multi_upload_after").show(),$("#multiple_Face_swapper_container_v .drag_loadbox").addClass("height160")):($("#multiple_Face_swapper_container_v .multi_upload_before").show(),$("#multiple_Face_swapper_container_v .multi_upload_after").hide(),$("#multiple_Face_swapper_container_v .change_multi_face_btn").addClass("disabled")),e.firstPicLoading?($("#multiple_Face_swapper_container_v .multi_Input").addClass("disabled"),$("#multiple_Face_swapper_container_v .random_btn").addClass("disabled")):($("#multiple_Face_swapper_container_v .multi_Input").removeClass("disabled"),$("#multiple_Face_swapper_container_v .random_btn").removeClass("disabled")),!0},get:function(e,t){return e[t]}})}),[{key:"data",value:function(){return{mergeImg:{width:0,height:0},proxyData:{originImage:null,firstPicLoading:!1},tryCount:0,multipleIndex:null,delay:2e3,lastCall:0,taskid:null,imgList:[],mergeImgUrl:null,mergeKey:null,changeFaceLoading:!1,canMultiFaceData:{},showCreditBannerBool:!0,uploadFacesNumber:0,formdata:{avatar_obey_key:null,get_face_id:null,watermark_type:2,avatar_main_key:[]},itemLoading:[]}}},{key:"setLoadingVideoText",value:function(e,t){Number(t)<1&&(t=0),1===e&&$("#multiple_Face_swapper_container_v .loading_multi_box p").text(multitextContentObj.faceSwapPop01.Preparing_step),2===e&&$("#multiple_Face_swapper_container_v .loading_multi_box p").text(t+"% "+multitextContentObj.faceSwapPop01.Analyzing_setp),3===e&&$("#multiple_Face_swapper_container_v .loading_multi_box p").text(t+"% "+multitextContentObj.faceSwapPop01.Swapping_setp)}},{key:"addMultiVideo",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,a,i,o,r,l,c,s,u,_,p,d,m,f,g,v,h=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.addData,a=void 0===n?{}:n,i=t.file,o=t.callback,e.prev=1,"string"==typeof i||this.checkVideoType(i)){e.next=4;break}return e.abrupt("return");case 4:if(this.setLimit(i)){e.next=6;break}return e.abrupt("return");case 6:if(l=(null==a?void 0:a.demoKey)||void 0,c=(null==a?void 0:a.demoSrc)||void 0,s=(null==a?void 0:a.demoDuration)||void 0,u=(null==a?void 0:a.demoImgSrc)||void 0,this.setFirstStart(!0),_=userRuleConfig.duration,d=p=null,m=l?"video":"gif",this.maintype="video",null==i||null===(r=i.type)||void 0===r||!r.includes("video")){e.next=23;break}return e.next=19,this.getVideoInfo(i);case 19:f=e.sent,_=f.duration,d=f.coverImg,m="video";case 23:if(this.duration=_,this.setLiLoading(!0),this.showToolBtn(!1),$("#multiple_Face_swapper_container_v .change_multi_face_btn").addClass("disabled"),!l){e.next=34;break}d=u,p=c,_=s,this.formdata.avatar_obey_key=l,e.next=39;break;case 34:return p=URL.createObjectURL(i),e.next=37,this.uploadMultiVideoPromise(i);case 37:g=e.sent,this.formdata.avatar_obey_key=g.data.key;case 39:"gif"===m?(d=URL.createObjectURL(i),$(".controls").hide()):$(".controls").attr("style","display: flex"),v={file:i,showUrl:d,duration:_,showVideoUrl:p},this.uploadFacesNumber=0,this.addFindFacesTask((function(){h.form.originImage=v,$("#multiple_Face_swapper_container_v .multi_img").find("#multi_img").attr("src",v.showUrl),$("#multiple_Face_swapper_container_v .multi_img").addClass("video_img"),h.showMultiVideo(m,p,d),null==o||o(v),showBtnCreditsMultiVideo(!1),h.setLiLoading(!1),h.setFirstStart(!1)}),_),e.next=52;break;case 45:e.prev=45,e.t0=e.catch(1),console.error(111),console.error(e.t0),this.multimodelV.errorMessage({conText:"\n        <h1>".concat(textContentObj.errorUploadTitle,"</h1>\n        <p>").concat(textContentObj.filereadfail,"</p>\n        "),btnText:textContentObj.ok}),this.multimodelV.options.visible=!0,this.setFirstStart(!1);case 52:case"end":return e.stop()}}),e,this,[[1,45]])}))),function(e){return a.apply(this,arguments)})},{key:"ttsBlank",value:function(e){return null==e||"null"===e||""===e||void 0===e||"undefined"===e||"unknown"===e}},{key:"progressMove",value:function(e){var t=0;t=isMobileDevice()?e.targetTouches[0].pageX:e.clientX;var n=document.querySelector(".control_progress"),a=($(".control_progress .control_progress_innter"),n.getBoundingClientRect().left),i=n.offsetWidth,o=t-a}},{key:"setPlayControls",value:function(e,t){var n=t.find(".control_btn"),a=(t.find(".control_time"),e[0]);a.load();e.off("loadedmetadata").on("loadedmetadata",(function(){e.off("click").on("click",(function(){n.hasClass("pause")?a.pause():a.play()}))})),e.off("ended").on("ended",(function(){console.log("end"),n.removeClass("pause")})),e.off("playing").on("playing",(function(){console.log("play"),n.addClass("pause")})),e.off("pause").on("pause",(function(){console.log("pause"),n.removeClass("pause")}))}},{key:"showMultiVideo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=$("#video_preview_dom_multi"),i=$(".video_preview_dom_multi_box"),o=$("#multi_video_con"),r=$("#multi_img_con"),l=$("#img_gif_node_multi"),c=$("#large_multi_video");"video"===e?(a.attr("src",t),i.find("#img_video_cover").attr("src",n),i.show(),l.hide()):(l.attr("src",t),l.show(),i.hide()),o.show(),r.hide(),this.setPlayControls(a,$(".multi_controls")),this.setPlayControls(c,$(".large_multi_controls"))}},{key:"uploadMultiVideoPromise",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function n(a,i){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.getUploadVideoUrl(e.name);case 3:o=n.sent,t.uploadFile({url:o.data.upload_url,file:e}).then((function(e){a(o)})).catch((function(e){return i(e)})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getVideoInfo",value:function(e){return new Promise((function(t,n){var a=e;"string"!=typeof e&&(a=URL.createObjectURL(e));var i=document.getElementById("multi_video_dom");i.src=a,i.addEventListener("loadedmetadata",(function(){setTimeout(_asyncToGenerator(_regeneratorRuntime().mark((function e(){var n,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.duration,e.next=3,getVideoCoverImage(i);case 3:a=e.sent,t({duration:n,coverImg:a});case 5:case"end":return e.stop()}}),e)}))),200)}),{once:!0}),i.addEventListener("error",(function(e){n(e)}),{once:!0})}))}},{key:"setLimit",value:function(e){var t,n=!0,a=1048576*window.userRuleConfig.limit;"string"!=typeof e&&e.size>a&&(gtag("event","alert_mulfaceswap_videomaxlimit"),1===(null===(t=userRuleConfig)||void 0===t?void 0:t.is_subscriber)?(this.multimodelV.errorMessage({conText:"\n            <h1>".concat(getFSMCreditsText("Model_MaximumFile_title"),"</h1>\n            <p>").concat(getFSMCreditsText("Model_MaximumFile_span2",{val:window.userRuleConfig.limit}),"</p>\n          "),btnText:textContentObj.ok}),this.multimodelV.options.visible=!0):showMaximumFileSizeV(),n=!1);return n}},{key:"addFindFacesTask",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var a,i,o,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={avatar_obey_key:this.formdata.avatar_obey_key,duration:Number(n||1)},n||delete a.duration,e.next=5,fetchPost("ai/ai-tool/add-task",{action:"multiple_video_get_face",param:a},TOOL_API,{"X-TASK-VERSION":"2.0.0"});case 5:i=e.sent,o=i.data,200===(r=i.code)?(this.formdata.get_face_id=o.task_id,this.getFindFacesTask(t)):3014===r?(showMaximumMV(),this.checkMultiChangeFaceStatus(),this.setFirstStart(!1),this.setLiLoading(!1)):(this.multimodelV.errorMessage({conText:"\n            <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n          "),btnText:multitextContentObj.OK}),this.multimodelV.options.visible=!0,this.setFirstStart(!1),this.setLiLoading(!1),this.checkMultiChangeFaceStatus()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getFindFacesTask",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,a,i=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,a=this.formdata.get_face_id){e.next=4;break}return e.abrupt("return");case 4:fetchPost("ai/tool/get-task",{id:a},TOOL_API).then((function(e){if(e.message.includes("no face"))return i.multimodelV.errorMessage({conText:"\n            <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n            <p>").concat(multitextContentObj.NoFaceMulti,"</p>\n          "),btnText:multitextContentObj.OK}),i.multimodelV.options.visible=!0,i.setLoadingStart(!1),i.setLoadingMaskTip(!1),$("#multiple_Face_swapper_container_v .change_multi_face_btn").addClass("disabled"),i.formdata.avatar_main_key=[],n.setMultipleListImgs(),void $("#multiple_Face_swapper_container_v .people_recognized_box").hide();if(200!==e.code){var a=multitextContentObj.faceSwapPop01.processImage;i.multimodelV.errorMessage({conText:"\n            <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n            <p>").concat(a,"</p>\n          "),btnText:multitextContentObj.OK}),i.multimodelV.options.visible=!0,i.setLoadingStart(!1),i.setLoadingMaskTip(!1)}else i.tryCount=0,0===e.data.status?(console.log(e.data),null==t||t(),i.formdata.avatar_main_key=e.data.additional_data.map((function(e){return{obey_part_key:e.avatar_part_key,obey_part_url:e.avatar_part_url}})),console.log(n),n.setMultipleListImgs(),setTimeout((function(){$("#multiple_Face_swapper_container_v .people_recognized_box").show(),i.setFirstStart(!1),i.setLiLoading(!1)}),1e3)):setTimeout((function(){i.getFindFacesTask(t)}),2e3)})).catch((function(e){console.error(e),i.tryCount>=3?(i.multimodelV.errorMessage({conText:"\n            <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n            <p>").concat(multitextContentObj.processImage,"</p>\n          "),btnText:multitextContentObj.OK}),i.multimodelV.options.visible=!0,i.setLoadingStart(!1)):(console.log("retrying"),setTimeout((function(){i.getFindFacesTask(t),i.tryCount++}),5e3))}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"urlToFile",value:function(e){return new Promise((function(t,n){fetch(e).then((function(e){return e.blob()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"setLoadingStart",value:function(e){e?($("#multiple_Face_swapper_container_v .random_btn").addClass("disabled"),this.setFirstStart(!0),$("#multiple_Face_swapper_container_v .change_multi_face_btn ._multi_step3_btn").text(multitextContentObj.Generating),$("#multiple_Face_swapper_container_v .multi-generating-animate").show(),this.changeFaceLoading=!0,$("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("style","filter: blur(5px) brightness(0.7)"),$("#multiple_Face_swapper_container_v .change_multi_face_btn").addClass("disabled"),this.setLiLoading(!0),$("#multiple_Face_swapper_container_v .loading_multi_box").show(),$("#multiple_Face_swapper_container_v .people_recognized_list").addClass("inter_loading"),$(".high_quality_append_dom_multiv").attr("style","pointer-events:none")):(this.setFirstStart(!1),$("#multiple_Face_swapper_container_v .random_btn").removeClass("disabled"),$("#multiple_Face_swapper_container_v .change_multi_face_btn ._multi_step3_btn").text(multitextContentObj.step3_btn),$("#multiple_Face_swapper_container_v .multi-generating-animate").hide(),$("#multiple_Face_swapper_container_v .change_multi_face_btn").removeClass("disabled"),this.changeFaceLoading=!1,this.setLiLoading(!1),$("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("style",""),$("#multiple_Face_swapper_container_v .loading_multi_box").hide(),$("#multiple_Face_swapper_container_v .people_recognized_list").removeClass("inter_loading"),$(".high_quality_append_dom_multiv").attr("style",""))}},{key:"showToolBtn",value:function(e){if(e){var t=window.getComputedStyle(document.querySelector("#mult_main_face_change_img"));this.mergeImg={width:t.getPropertyValue("width").split("px")[0],height:t.getPropertyValue("height").split("px")[0]},$("#multiple_Face_swapper_container_v .multi_img_btns").attr("style","display: flex;")}else $("#multiple_Face_swapper_container_v .multi_img_btns").hide()}},{key:"getImgList",value:function(){var e=this,t=this;fetchGet("ai/public/example?action=multiple_video_face_swap",TOOL_API,{"Request-Origin":"vidqu"}).then((function(n){if(401===n.code)return e.multimodelV.errorMessage({conText:multitextContentObj.loginFirst,btnText:multitextContentObj.OK}),e.multimodelV.options.visible=!0,void $("#multiple_Face_swapper_container_v .multi_pics").html(multitextContentObj.loginFirst);t.domain=n.data.domain,t.imgList=n.data.video,n.data.video.forEach((function(e,n){$("#multiple_face_swapper_try .video-content-box .content-box").append('\n            <li><img src="'.concat(t.domain+e.cover_key,'" data-key="').concat(e.video_key,'" data-index="').concat(n+1,'"/></li> \n          '))}))})).catch((function(e){console.error("fail",e)}))}},{key:"resizeImageByFile",value:function(e){var t=this;return new Promise((function(n,a){var i=new FileReader;i.onloadend=function(){var e=new Image;e.onload=function(){var a=document.createElement("canvas"),i=a.getContext("2d"),o=Math.max(e.width,e.height);if(o>1920){var r=1920/o;a.width=e.width*r,a.height=e.height*r}else a.width=e.width,a.height=e.height;i.drawImage(e,0,0,a.width,a.height);var l=a.toDataURL(),c=t.transtoBlob({b64data:l,contentType:"image/png"}),s="width";a.width<a.height&&(s="height"),n({blog:c,imgType:s})},e.onerror=function(){a(new Error("Image load failed"))},e.src=i.result},i.onerror=a,i.readAsDataURL(e)}))}},{key:"uploadMultiImagePromise",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function n(a,i){var o,r,l,c;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.getUploadFileUrl(e.type);case 3:return o=n.sent,n.next=6,t.resizeImageByFile(e);case 6:r=n.sent,l=r.blog,c=r.imgType,t.uploadFile({url:o.data.upload_url,file:l}).then((function(e){a({res:o,blog:l,imgType:c})})).catch((function(e){return i(e)})),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0),i(!1);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getSourceUrl",value:function(e){return fetchPost("ai/source/get-access-url",{key:e,file_name:"Vidnoz_AiFaceSwap_"+(new Date).getTime()+".png"},TOOL_API)}},{key:"setDragLoading",value:function(e,t){t?(this.proxyData.originImage?$(".".concat(e," .can_drag_box")).addClass("blur"):$(".".concat(e," .other_box")).addClass("blur"),$(".".concat(e," .drag_loadbox")).show()):($(".".concat(e," .other_box")).removeClass("blur"),$(".".concat(e," .can_drag_box")).removeClass("blur"),$(".".concat(e," .drag_loadbox")).hide())}},{key:"throttle",value:function(e,t){var n=0;return function(){var a=(new Date).getTime();a-n>=t&&(e.apply(void 0,arguments),n=a)}}},{key:"getCanSwapFaceBool",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n,a){var i,o,r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!getCookie("access_token")){t.next=18;break}if(200!==(null===(i=e.canMultiFaceData)||void 0===i?void 0:i.code)){t.next=10;break}if(1!==(null===(o=e.canMultiFaceData.data)||void 0===o?void 0:o.last_use_credit)||0!==(null===(r=e.canMultiFaceData.data)||void 0===r?void 0:r.credit)){t.next=7;break}return t.next=5,showRemoveWatermarkMV();case 5:t.sent&&n(!1);case 7:n(!0),t.next=16;break;case 10:if(3008!==e.canMultiFaceData.code){t.next=14;break}return showNotEnoughCreditsMV(getCreditsFromVideoOrPic(multiAiFaceV,"video")),n(!1),t.abrupt("return");case 14:showMaximumMV(),n(!1);case 16:t.next=19;break;case 18:200!==e.canMultiFaceData.code?(showMaximumMV(),n(!1)):n(!0);case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"setLoadingMaskTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.maskSpan,t.show_wait),a=t.num,i=t.second,o=$("#multiple_Face_swapper_container_v #createTaskMaskPhoto"),r=$("#multiple_Face_swapper_container_v #multiple_Face_swapper_container .v_mask_background");if(e){if(1===n){o.find(".v_mask_content2").show();var l=i,c="wait_minutes";i>=60?l=Math.ceil(i/60):c="wait_seconds",o.find(".v_mask_content2 .v_mask_span").html(setTextContentObj("estimated_wait_time",{val:a,val2:l,val3:setTextContentObj(c)}))}else o.find(".v_mask_content2").hide();o.show(),r.show()}else o.hide(),r.hide()}},{key:"setMaskUnlockPriority",value:function(){$("#multiple_Face_swapper_container_v #createTaskMaskPhoto .v_mask_unlock_priority").on("click",(function(e){setSessionCookie("st","mulcreditpriority"),gtag("event","click_mulfaceswap_videopriority")}))}},{key:"setMultipleListImgs",value:function(){var e=this,t=$("#multiple_Face_swapper_container_v #people_recognized_list");if(t){var n="";t.html(),e.itemLoading=[],this.formdata.avatar_main_key.forEach((function(t){e.itemLoading.push(!1),n+='\n          <div class="people_recognized_item">\n            <img src="'.concat(t.obey_part_url,'" />\n            <div class="add_icon_box">\n              <img class="add_icon_img" src="" style="display: none" />\n              <img class="add_icon" src="/dist/img/face-swap/icon_add_i.svg" />\n              <div class="add_icon_loading" style="display: none"></div>\n              <div class="add_icon_change"></div>\n            </div>\n            <div class="add_icon_close" style="display: none"></div>\n          </div>\n        ')})),t.html(n),$("#multiple_Face_swapper_container_v .people_recognized_item").each((function(t){var n=$(this).index(),a=$(this);a.find(".add_icon_box").on("click",(function(){e.multipleIndex=n,gtag("event","up_mulfaceswap_targetvideo"),$("#multiple_Face_swapper_container_v #multi_uploader").click()})),a.find(".add_icon_close").on("click",(function(){var t;a.find(".add_icon").show(),a.find(".add_icon_img").hide(),a.find(".add_icon_close").hide(),e.formdata.avatar_main_key[n]&&(e.formdata.avatar_main_key[n].main_part_key=void 0),e.checkMultiChangeFaceStatus();var i=null===(t=e.formdata.avatar_main_key.filter((function(e){return e.main_part_key})))||void 0===t?void 0:t.length;showBtnCreditsMultiVideo(i>0)})),a.on("dragover",(function(e){e.preventDefault(),a.find(".add_icon_loading").attr("style").includes("display: none")&&a.addClass("draggable")})),a.on("dragenter",(function(e){e.preventDefault(),a.find(".add_icon_loading").attr("style").includes("display: none")&&a.addClass("draggable")})),a.on("dragleave",(function(e){e.preventDefault(),a.find(".add_icon_loading").attr("style").includes("display: none")&&a.removeClass("draggable")})),a.on("drop",(function(t){if(t.preventDefault(),a.removeClass("draggable"),a.find(".add_icon_loading").attr("style").includes("display: none")){if(1!==t.originalEvent.dataTransfer.files.length)return e.multimodelV.errorMessage({conText:"<h1>".concat(textContentObj.processImageTitle,"</h1>\n              <p>").concat(multitextContentObj.faceSwapPop01.onlyone,"</p>"),btnText:multitextContentObj.OK}),void(e.multimodelV.options.visible=!0);gtag("event","up_mulfaceswap_targetvideo"),e.multipleIndex=n,e.itemUploading(t.originalEvent.dataTransfer.files[0])}}))}))}}},{key:"setCurrentImgLoading",value:function(e,t){var n=this.itemLoading;e?(n[t]=!0,$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon_loading").show(),$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon_close").hide(),$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon").hide(),$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon_img").hide(),$("#multiple_Face_swapper_container_v .change_multi_face_btn").addClass("disabled"),$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon_box").addClass("disabled")):(n[t]=!1,n.some((function(e){return!0===e}))||this.form.firstPicLoading?$("#multiple_Face_swapper_container_v .change_multi_face_btn").addClass("disabled"):$("#multiple_Face_swapper_container_v .change_multi_face_btn").removeClass("disabled"),this.formdata.avatar_main_key[t].main_part_key||$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon").show(),$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon_loading").hide(),$("#multiple_Face_swapper_container_v .people_recognized_item").eq(t).find(".add_icon_box").removeClass("disabled"))}},{key:"itemUploading",value:(e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,a,i,o,r,l,c,s,u,_;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.itemLoading,"string"==typeof t||this.checkFileType(t)){e.next=3;break}return e.abrupt("return");case 3:if(n=$("#multiple_Face_swapper_container_v .people_recognized_item .add_icon").eq(this.multipleIndex),a=$("#multiple_Face_swapper_container_v .people_recognized_item .add_icon_img").eq(this.multipleIndex),$("#multiple_Face_swapper_container_v .people_recognized_item .add_icon_close").eq(this.multipleIndex),i=this.multipleIndex,console.log(this.multipleIndex),n){e.next=10;break}return e.abrupt("return");case 10:return this.setCurrentImgLoading(!0,i),e.next=13,this.checkFacePicMulti(t);case 13:return e.sent,o={},e.prev=15,e.next=18,this.uploadMultiImagePromise(t);case 18:o=e.sent,e.next=30;break;case 21:return e.prev=21,e.t0=e.catch(15),c=multitextContentObj.faceSwapPop01.upload_file_failed,window.userRuleConfig.credit&&(c=multitextContentObj.faceSwapPop01.upload_file_failed_credits),this.multimodelV.errorMessage({conText:"\n        <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n        <p>").concat(c,"</p>\n        "),btnText:multitextContentObj.OK}),this.multimodelV.options.visible=!0,this.setCurrentImgLoading(!1,i),this.checkMultiChangeFaceStatus(),e.abrupt("return");case 30:u=(s=o).blog,_=s.res,s.imgType,r=u,l=URL.createObjectURL(r),n.hide(),a.attr("src",l),a.show(),console.log(_),this.formdata.avatar_main_key[i]=_objectSpread(_objectSpread({},this.formdata.avatar_main_key[i]),{},{main_part_key:_.data.key}),$("#multiple_Face_swapper_container_v .change_multi_face_btn").removeClass("disabled"),this.setCurrentImgLoading(!1,i),$("#multiple_Face_swapper_container_v .people_recognized_item").eq(i).find(".add_icon_close").show(),$("#multiple_Face_swapper_container_v #multi_uploader")[0].value="",showBtnCreditsMultiVideo(!0);case 44:case"end":return e.stop()}}),e,this,[[15,21]])}))),function(t){return e.apply(this,arguments)})},{key:"eventLoginsuccess",value:function(){var e=this;document.querySelector("my-component").addEventListener("loginsuccess",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n){var a,i,o,r,l,c;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,getCountryConfig();case 2:c=null===(a=e.formdata.avatar_main_key.filter((function(e){return e.main_part_key})))||void 0===a?void 0:a.length,console.error(c,null===(i=e.formdata)||void 0===i?void 0:i.avatar_main_key),null!==(o=e.formdata)&&void 0!==o&&o.avatar_main_key&&c>0&&showBtnCreditsMultiVideo(!0),multiVcreditSystem.setHighQualityHtml($(".high_quality_append_dom_multiv"),1!==(null===(r=window.userRuleConfig)||void 0===r?void 0:r.is_subscriber),(function(){gtag("event","alert_faceswap_hd_v"),showHdCredits({clickfn:function(){gtag("event","click_faceswap_hd_v")},type:"multiv"})}),"multiv"),multicreditSystem.setHighQualityHtml($(".high_quality_append_dom"),1!==(null===(l=window.userRuleConfig)||void 0===l?void 0:l.is_subscriber),(function(){gtag("event","alert_faceswap_hd_m"),showHdCredits({clickfn:function(){gtag("event","click_faceswap_hd_m")},type:"multi"})}),"multi"),e.showCreditBannerV(!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"showCreditBannerV",value:function(e){this.showCreditBannerBool=e,multiVcreditSystem.showCreditBanner({bool:e}),multicreditSystem.showCreditBanner({bool:e})}}]);var e,t,n,a}(),MutiVideoModel=function(){return _createClass((function e(){_classCallCheck(this,e);var t=this;this.options=new Proxy({visible:!1,type:"error",downloading:!1,downloadUrl:null,downloadType:0},{set:function(e,n,a){if(e[n]=a,"visible"===n)t.controlVisible(a);return!0},get:function(e,t){return e[t]}})}),[{key:"controlVisible",value:function(e){e?$("#multiple_Face_swapper_container_v #multi_change_face_modal").show():$("#multiple_Face_swapper_container_v #multi_change_face_modal").hide()}},{key:"errorMessage",value:function(e){var t=e.conText,n=e.btnText,a=e.btnClick;$("#multiple_Face_swapper_container_v .change_face_modal_content").html('\n      <div class="error_con">\n          <div class="error_p">'.concat(t,"</div>\n          </div>\n      ")),$("#multiple_Face_swapper_container_v .change_face_modal_btns").html('\n      <div class="change_face_modal_btn">'.concat(n,"</div>\n    ")),$("#multiple_Face_swapper_container_v .change_face_modal_btn").on("click",(function(){a&&a(),$("#multiple_Face_swapper_container_v #multi_change_face_modal").hide()}))}},{key:"downloadMessage",value:function(){var e=this;$("#multiple_Face_swapper_container_v #multi_change_face_modal").attr("style","width: 550px;height: 125px"),$("#multiple_Face_swapper_container_v .change_face_modal_btns").hide(),$("#multiple_Face_swapper_container_v .close_btn").hide(),$("#multiple_Face_swapper_container_v .change_face_modal_content").html('\n      <div class="download_multi_con">\n        <p class="loading_download_title">'.concat(multitextContentObj.faceSwapPop01.downloading,'</p>\n        <div class="loading_prograss">\n          <div class="loading_prograss_con"></div>\n        </div>\n      </div>\n    '));var t=0,n=setInterval((function(){if((t+=1)>=90&&(t=90),!e.options.downloading)return $("#multiple_Face_swapper_container .close_btn").show(),clearInterval(n),void(1===e.options.downloadType?($("#multiple_Face_swapper_container_v .loading_prograss_con").attr("style","width: 100%"),setTimeout((function(){e.options.visible=!1,e.downloadSuccess(),e.options.visible=!0}),500)):2===e.options.downloadType&&setTimeout((function(){e.options.visible=!1,e.downloadError(),e.options.visible=!0}),500));$("#multiple_Face_swapper_container_v .loading_prograss_con").attr("style","width: ".concat(t,"%"))}),50)}},{key:"downloadSuccess",value:function(){var e=this;$("#multiple_Face_swapper_container_v .change_face_modal_btns").show(),$("#multiple_Face_swapper_container_v .close_btn").show(),$("#multiple_Face_swapper_container_v #multi_change_face_modal").attr("style","padding: 20px 25px;"),$("#multiple_Face_swapper_container_v .change_face_modal_content").html('\n      <div class="download_con">\n        <h1>'.concat(multitextContentObj.faceSwapPop01.downloadH1,'</h1>\n        <p class="download_con_p">').concat(multitextContentObj.faceSwapPop01.downloadTips,"</p>\n      </div>\n    ")),$("#multiple_Face_swapper_container_v .change_face_modal_btns").html('\n      <div class="change_face_modal_btn">'.concat(multitextContentObj.faceSwapPop01.continue,"</div>\n    ")),$("#multiple_Face_swapper_container_v .change_face_modal_btn").on("click",(function(){e.options.visible=!1,$("#multiple_Face_swapper_container_v #multi_change_face_modal").hide()})),$("#multiple_Face_swapper_container_v .click_multi_me").on("click",_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,checkVideoExpired(e.options.downloadUrl);case 2:if(t.sent){t.next=9;break}return e.errorMessage({conText:"\n            <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n            <p>").concat(multitextContentObj.expired_file,"</p>\n          "),btnText:multitextContentObj.OK}),e.options.downloadType=0,e.options.downloading=!1,e.options.visible=!0,t.abrupt("return");case 9:$(this).attr("href",e.options.downloadUrl),$(this).click();case 11:case"end":return t.stop()}}),t,this)}))))}},{key:"downloadError",value:function(){$("#multiple_Face_swapper_container_v #multi_change_face_modal").attr("style",""),$("#multiple_Face_swapper_container_v .change_face_modal_btns").show(),this.errorMessage({conText:"\n        <h1>".concat(multitextContentObj.faceSwapPop01.downloadError,"</h1>\n        <p>").concat(multitextContentObj.faceSwapPop01.errorUpload,"</p>\n      "),btnText:multitextContentObj.OK})}}])}();function showBtnCreditsMultiVideo(e){var t=multiAiFaceV.formdata.avatar_main_key.filter((function(e){return e.main_part_key})).length;multiAiFaceV.uploadFacesNumber=t,multiVcreditSystem.showBtnCredits({bool:e,credits:getCreditsFromVideoOrPic(multiAiFaceV,"video"),appendDom:$("#multiple_Face_swapper_container_v .change_multi_face_btn"),type:"video"})}var createMultiDialogV=function(e,t){$("#large_multi_face_v_modal .large_multi_img").attr("src",e);document.querySelector(".large_multi_img");$("#large_multi_face_v_modal .multi_img_btns").attr("style","display: flex;"),$("#large_multi_face_v_modal").attr("style","display: flex")};function showNotEnoughCreditsMV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;gtag("event","alert_mulfaceswap_videonocredit"),multiVcreditSystem.showCreditPopup({title:getfsCreditsText("Model_not_credits_title"),content:getfsCreditsText("Model_not_credit_span",{val:e},!0),btn:getfsCreditsText("Model_not_credits_btn"),btnFn:function(){gtag("event","click_mulfaceswap_videonocredit"),setCookie("st","mulfsvideonocredit")},modalCoins:"notenough"})}function showMaximumMV(){var e;multiVcreditSystem.showCreditPopup({title:textContentObj.exceedTitle,content:getfsCreditsText("Model_Maximum_span",{val:null===(e=window)||void 0===e||null===(e=e.userRuleConfig)||void 0===e?void 0:e.m_times},!0),btn:getfsCreditsText("Model_Unlock_btn"),btnFn:function(){},modalCoins:"timesmax"})}function showRemoveWatermarkMV(){return new Promise((function(e,t){multiVcreditSystem.showCreditPopup({title:getfsCreditsText("Model_Remove_Watermark_title"),content:getfsCreditsText("Model_Remove_Watermark_span"),btn:getfsCreditsText("Model_Remove_Watermark_btn"),btnWater:getfsCreditsText("Model_Remove_Watermark_btn1"),btnWaterFn:function(){gtag("event","click_faceswap_stock_m"),e(!0)},closeClick:function(){e(!1)},btnFn:function(){setCookie("st","removewatermark_m"),gtag("event","click_faceswap_no_m"),e(!1)},modalCoins:"watermarker"})}))}var muticreditsPhotoModelV=null,btnLoading2=!1,multimodelV=new MutiVideoModel,multiAiFaceV=new MultiVideoAiFace({multimodelV:multimodelV}),muticreditsPhotoModelVModel=new MutiCreditPhotoModel($("#multiple_Face_swapper_container_v .multi_credits_messageModel"),multiAiFaceV,2);function checkVideoExpired(e){return new Promise((function(t,n){var a=$("#multi_video_dom");a.attr("src",e),a.off("loadedmetadata").on("loadedmetadata",(function(){t(!0)})),a.off("error").on("error",(function(){t(!1)}))}))}function photo_isSameDay(){var e=Date.now(),t=getCookie("faceSwapTime_swap");if(!t)return!1;var n=new Date(e),a=new Date(Number(t)),i=n.getFullYear(),o=n.getMonth(),r=n.getDate(),l=a.getFullYear(),c=a.getMonth(),s=a.getDate();return i===l&&o===c&&r===s}window.muticreditsPhotoModelV=multiAiFaceV,$(document).ready((function(){gtag("event","show_miofs_multiphoto"),multiAiFaceV.eventLoginsuccess(),multiAiFaceV.getImgList();var e=$("#multiple_Face_swapper_container_v .appsigninbtn"),t=($("#multiple_Face_swapper_container_v .signupfootbtn"),$("#multiple_Face_swapper_container_v .signupnavbtn")),n=$("#multiple_Face_swapper_container_v .appsignupbtn");function a(e){e?($("#multiple_Face_swapper_container_v .multi_Input").addClass("draggable"),$("#multiple_Face_swapper_container_v .multi_Input").find("svg").hide(),$("#multiple_Face_swapper_container_v .multi_Input").find(".change_image_text").text(getMultiText("drag_btn"))):($("#multiple_Face_swapper_container_v .multi_Input").removeClass("draggable"),$("#multiple_Face_swapper_container_v .multi_Input").find("svg").show(),$("#multiple_Face_swapper_container_v .multi_Input").find(".change_image_text").text(getMultiText("change_btn")))}e.attr("product-position","isTool-no-reloading"),t.attr("product-position","isTool-no-reloading"),n.attr("product-position","isTool-no-reloading"),$("#multiple_Face_swapper_container_v .multi_uploader_btn").on("click",(function(e){e.stopPropagation(),$("#multiple_Face_swapper_container_v .multi_uploader_multi").click()})),$("#multiple_Face_swapper_container_v .upload_step").on("dragover",(function(e){e.preventDefault()})),$("#multiple_Face_swapper_container_v .can_drag_box").on("dragenter",(function(e){e.preventDefault(),multiAiFaceV.form.firstPicLoading||(multiAiFaceV.setDragLoading("multi_upload",!0),multiAiFaceV.setDragLoading("change_upload",!1))})),$("#multiple_Face_swapper_container_v .multi_upload .uploader_loading_mask").on("dragleave",(function(e){multiAiFaceV.setDragLoading("multi_upload",!1)})),$("#multiple_Face_swapper_container_v .multi_upload .uploader_loading_mask").on("dragenter",(function(e){e.preventDefault(),multiAiFaceV.form.firstPicLoading||multiAiFaceV.setDragLoading("multi_upload",!0)})),$("#multiple_Face_swapper_container_v .multi_upload .uploader_loading_mask").on("dragover",(function(e){e.preventDefault(),multiAiFaceV.form.firstPicLoading||multiAiFaceV.setDragLoading("multi_upload",!0)})),$("#large_multi_face_v_modal").on("wheel",(function(e){e.preventDefault()})),$("#multiple_Face_swapper_container_v .multi_uploader_multi").on("change",(function(e){gtag("event","up_mulfaceswap_video");var t=e.target.files,n=t[0];if(t&&n){if(1!==t.length)return multiAiFaceV.multimodelV.errorMessage({conText:"<h1>".concat(textContentObj.processImageTitle,"</h1>\n          <p>").concat(multitextContentObj.faceSwapPop01.onlyone,"</p>"),btnText:multitextContentObj.OK}),void(multiAiFaceV.multimodelV.options.visible=!0);e.target.value=null,multiAiFaceV.addMultiVideo({file:n})}})),$("#multiple_Face_swapper_container_v .multi_upload .uploader_loading_mask, .multi_uploader_btn_con_mask").on("drop",(function(e){if(e.preventDefault(),a(!1),multiAiFaceV.setDragLoading("multi_upload",!1),!multiAiFaceV.form.firstPicLoading){if(1!==e.originalEvent.dataTransfer.files.length)return multiAiFaceV.multimodelV.errorMessage({conText:"<h1>".concat(textContentObj.processImageTitle,"</h1>\n            <p>").concat(multitextContentObj.faceSwapPop01.onlyone,"</p>"),btnText:multitextContentObj.OK}),void(multiAiFaceV.multimodelV.options.visible=!0);gtag("event","up_mulfaceswap_video");var t=e.originalEvent.dataTransfer.files[0];$("#multiple_Face_swapper_container_v .multi_upload").addClass("loading_mask"),multiAiFaceV.addMultiVideo({file:t})}})),$("#multiple_Face_swapper_container_v .multi_Input").on("click",(function(e){e.stopPropagation(),btnLoading2||(btnLoading2=!0,setTimeout((function(){btnLoading2=!1}),2e3),$("#multiple_Face_swapper_container_v .multi_uploader_multi").click())})),$("#multiple_Face_swapper_container_v .multi_Input .multi_uploader_btn_con_mask").on("dragover",(function(e){e.preventDefault(),a(!0)})).on("dragenter",(function(e){e.preventDefault(),a(!0)})).on("dragleave",(function(e){e.preventDefault(),a(!1)})),$("#multiple_Face_swapper_container_v .multi_Input").on("dragover",(function(e){e.preventDefault(),a(!0)})).on("dragenter",(function(e){e.preventDefault(),a(!0)})),$("#multiple_Face_swapper_container_v #multiple_Face_swapper_container .removeWatemark_btn").on("click",(function(e){})),$("#large_multi_face_v_modal .removeWatemark_btn").on("click",(function(e){})),$("#multiple_Face_swapper_container_v .compare_multi_btn").on("pointerdown",(function(e){var t;if(e.preventDefault(),gtag("event","contrast_miofs_res_m"),!multimodelV.options.downloading&&!multiAiFaceV.changeFaceLoading&&2!==e.button){var n,a;if(null!==(t=multiAiFaceV.form)&&void 0!==t&&null!==(t=t.originImage)&&void 0!==t&&t.showUrl)$("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("src",null===(n=multiAiFaceV.form)||void 0===n?void 0:n.originImage.showUrl),$("#large_multi_face_v_modal .large_multi_img").attr("src",null===(a=multiAiFaceV.form)||void 0===a?void 0:a.originImage.showUrl);document.addEventListener("pointerup",(function(e){$("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("data-key")||i(e)}))}})),$("#multiple_Face_swapper_container_v .share_multi_btn").on("click",(function(e){gtag("event","share_miofs_res_m");var t=document.querySelector("#shareDialogEl");t.changeTips({title:multitextContentObj.faceSwapPop01.share__Tile,content:getMultiText("share__box__text")}),t.showShare({url:multiAiFaceV.mergeImgUrl,action:"multiplefaceswapmioshare",imageKey:multiAiFaceV.mergeKey,text:getMultiText("share__text"),title:multitextContentObj.faceSwapPop01.share__Tile,id:multiAiFaceV.taskid,task_id:multiAiFaceV.taskid,btoaUrl:btoa(multiAiFaceV.mergeKey+","+multiAiFaceV.taskid),backParams:function(e){return{id:multiAiFaceV.taskid,key:null==e?void 0:e.merge_key}}})})),$("#multiple_Face_swapper_container_v .compare_multi_btn").on("pointerleave",(function(e){i(e)}));var i=function(e){e.preventDefault(),multimodelV.options.downloading||multiAiFaceV.changeFaceLoading||2!==e.button&&($("#multiple_Face_swapper_container_v #mult_main_face_change_img").attr("src",multiAiFaceV.mergeImgUrl),$("#large_multi_face_v_modal .large_multi_img").attr("src",multiAiFaceV.mergeImgUrl),document.removeEventListener("pointerup",(function(e){i(e)})))};$("#multiple_Face_swapper_container_v #mult_main_face_change_img").on("contextmenu",(function(e){e.originalEvent.preventDefault()})),$("#large_multi_face_v_modal .large_multi_img width").on("contextmenu",(function(e){e.originalEvent.preventDefault()})),$("#multiple_Face_swapper_container_v .large_multi_image").on("click",(function(e){e.preventDefault(),gtag("event","zoomin_mulfaceswap_videores"),multimodelV.options.downloading||multiAiFaceV.changeFaceLoading||2!==e.button&&createMultiDialogV(multiAiFaceV.mergeImgUrl,multiAiFaceV)})),$(".download_multi_btn_v").on("click",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),gtag("event","download_mulfaceswap_videores"),!multimodelV.options.downloading&&!multiAiFaceV.changeFaceLoading){e.next=4;break}return e.abrupt("return");case 4:if(2!==t.button){e.next=6;break}return e.abrupt("return");case 6:if(getCookie("access_token")){e.next=9;break}return showLoginWindow({isReloading:!1}),e.abrupt("return");case 9:multimodelV.options.downloading=!0,multimodelV.downloadMessage(),multimodelV.options.visible=!0,fetchPost("ai/source/get-access-url",{key:multiAiFaceV.mergeKey,action:"download",file_name:"Vidqu_faceswap"+multiAiFaceV.mergeKey.substring(multiAiFaceV.mergeKey.lastIndexOf("."))},TOOL_API).then(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.code){e.next=6;break}return multimodelV.errorMessage({conText:multitextContentObj.loginFirst,btnText:multitextContentObj.OK}),multimodelV.options.visible=!0,multimodelV.options.downloadType=2,multimodelV.options.downloading=!1,e.abrupt("return");case 6:return e.next=8,checkVideoExpired(t.data.url);case 8:if(e.sent){e.next=19;break}return $("#multiple_Face_swapper_container_v #multi_change_face_modal").attr("style",""),$("#multiple_Face_swapper_container_v .change_face_modal_btns").show(),multimodelV.errorMessage({conText:"\n                <h1>".concat(multitextContentObj.faceSwapPop01.processImageTitle,"</h1>\n                <p>").concat(multitextContentObj.expired_file,"</p>\n              "),btnText:multitextContentObj.OK}),multimodelV.options.downloadType=0,multimodelV.options.downloading=!1,multimodelV.options.visible=!0,e.abrupt("return");case 19:multimodelV.options.downloadType=1,multimodelV.options.downloading=!1,n=document.createElement("a"),multimodelV.options.downloadUrl=t.data.url,n.href=t.data.url,n.download="Vidqu_faceswap.png",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(n.href),gtag("event","dwsucc_miofs_res_mv");case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){multimodelV.options.downloadType=2,multimodelV.options.downloading=!1,console.error("fail",e)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$("#multiple_Face_swapper_container_v #change_face_login").on("click",(function(){window.location.href=thGotoApplibraryUrl+"signup?page_name=face-swap&name=ai"})),$("#multiple_Face_swapper_container_v .modal__main_close").on("click",(function(){$("#multiple_Face_swapper_container_v .vocalRemover__modal").hide()})),$("#multiple_Face_swapper_container_v .close_btn").on("click",(function(){multimodelV.options.visible=!1,$("#multiple_Face_swapper_container_v #multi_change_face_modal").hide(),$("#multiple_Face_swapper_container_v #multi_change_face_modal").hide()})),$("#large_multi_face_v_modal .multi_close_btn").on("click",(function(){$("#large_multi_face_v_modal").hide(),$("#large_multi_face_v_modal #large_multi_video")[0].pause()})),$("#multiple_Face_swapper_container_v .change_multi_face_btn").on("click",(function(e){gtag("event","click_mulfaceswap_videoswapbtn"),multiAiFaceV.uploadFacesNumber>3?gtag("event","succ_mulfaceswap_video10"):gtag("event","succ_mulfaceswap_video3"),multiAiFaceV.changeMultiFace($(this))})),$("#multiple_Face_swapper_container_v .face_swap_now").on("click",(function(){scrollToPositions(".ai-change-face")})),$("#multiple_Face_swapper_container_v .see_more_multi").on("click",(function(){$("#multiple_Face_swapper_container_v .multi_pics").removeClass("hide_other_pics"),$("#multiple_Face_swapper_container_v .see_more_multi").hide(),$("#multiple_Face_swapper_container_v .fold_multi").show()})),$("#multiple_Face_swapper_container_v .fold_multi").on("click",(function(){$("#multiple_Face_swapper_container_v .multi_pics").addClass("hide_other_pics"),$("#multiple_Face_swapper_container_v .see_more_multi").show(),$("#multiple_Face_swapper_container_v .fold_multi").hide()})),$("#multiple_Face_swapper_container_v #multi_uploader").on("change",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files&&t.target.files[0]){e.next=2;break}return e.abrupt("return");case 2:multiAiFaceV.itemUploading(t.target.files[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$("#multiple_face_swapper_try .video-content-box .content-box").on("click",(function(e){var t,n=e.target;if("img"!==n.tagName.toLowerCase())return!1;gtag("event","click_mulfaceswap_vidtpl");var a=function(e){return multiAiFaceV.domain+e};if(0!==(null===(t=multiAiFaceV.imgList)||void 0===t?void 0:t.length)&&!multiAiFaceV.form.firstPicLoading&&!multiAiFaceV.changeFaceLoading){var i=multiAiFaceV.imgList[n.getAttribute("data-index")-1];multiAiFaceV.showToolBtn(!1),multiAiFaceV.addMultiVideo({addData:{demoKey:i.video_key,demoSrc:a(i.video_key),demoDuration:i.duration,demoImgSrc:a(i.cover_key)},file:a(i.video_key),ourPicsIndex:$(this).index()+1})}})),isMacorIos()&&($("#multiple_Face_swapper_container_v .multi_upload_before h2")[0].innerText=multitextContentObj.video_tip_ios)})),$((function(){$("#multiple_Face_swapper_container_v .head-portrait .appsigninbtn").click((function(e){e.stopPropagation(),e.preventDefault()})),$("#multiple_Face_swapper_container_v .swap_credit_btn_multiphoto").on("click",(function(){getCookie("access_token")?setSessionCookie("st","mulloggedcreditbanner"):setSessionCookie("st","mulnotcreditbanner")}))}));